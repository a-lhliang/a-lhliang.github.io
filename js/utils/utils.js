let LHL_musicPlaying=!1,LHL_keyboard=!1,LHL_intype=!1,lhlgpt=null,LHL_cookiesTime=null,lastSayHello="";const pty={debounce:function(e,t,o){let n;return function(){const a=this,i=arguments,r=o&&!n;clearTimeout(n),n=setTimeout((function(){n=null,o||e.apply(a,i)}),t),r&&e.apply(a,i)}},throttle:function(e,t,o={}){let n,a,i,r=0;const l=function(){r=!1===o.leading?0:Date.now(),n=null,e.apply(a,i),n||(a=i=null)};return function(){const c=Date.now();r||!1!==o.leading||(r=c);const s=t-(c-r);a=this,i=arguments,s<=0||s>t?(n&&(clearTimeout(n),n=null),r=c,e.apply(a,i),n||(a=i=null)):n||!1===o.trailing||(n=setTimeout(l,s))}},snackbarShow:(e,t=!1,o=2e3)=>{const{position:n,bgLight:a,bgDark:i}=GLOBAL_CONFIG.Snackbar,r="light"===document.documentElement.getAttribute("data-theme")?a:i;Snackbar.show({text:e,backgroundColor:r,showAction:t,duration:o,pos:n,customClass:"snackbar-css"})},diffDate:(e,t=!1)=>{const o=new Date,n=new Date(e),a=o.getTime()-n.getTime(),i=36e5,r=24*i,{date_suffix:l}=GLOBAL_CONFIG;if(!t)return parseInt(a/r);const c=a/2592e6,s=a/r,d=a/i,u=a/6e4;return c>12?n.toISOString().slice(0,10):c>=1?`${parseInt(c)} ${l.month}`:s>=1?`${parseInt(s)} ${l.day}`:d>=1?`${parseInt(d)} ${l.hour}`:u>=1?`${parseInt(u)} ${l.min}`:l.just},loadComment:(e,t)=>{if("IntersectionObserver"in window){const o=new IntersectionObserver((e=>{e[0].isIntersecting&&(t(),o.disconnect())}),{threshold:[0]});o.observe(e)}else t()},scrollToDest:(e,t=500)=>{const o=window.pageYOffset;if(o>e&&(e-=70),"scrollBehavior"in document.documentElement.style)return void window.scrollTo({top:e,behavior:"smooth"});let n=null;e=+e,window.requestAnimationFrame((function a(i){n=n||i;const r=i-n;o<e?window.scrollTo(0,(e-o)*r/t+o):window.scrollTo(0,o-(o-e)*r/t),r<t?window.requestAnimationFrame(a):window.scrollTo(0,e)}))},animateIn:(e,t)=>{e.style.display="block",e.style.animation=t},animateOut:(e,t)=>{e.addEventListener("animationend",(function t(){e.style.display="",e.style.animation="",e.removeEventListener("animationend",t)})),e.style.animation=t},getParents:(e,t)=>{for(;e&&e!==document;e=e.parentNode)if(e.matches(t))return e;return null},siblings:(e,t)=>[...e.parentNode.children].filter((o=>t?o!==e&&o.matches(t):o!==e)),wrap:(e,t,o)=>{const n=document.createElement(t);for(const[e,t]of Object.entries(o))n.setAttribute(e,t);e.parentNode.insertBefore(n,e),n.appendChild(e)},unwrap:e=>{const t=e.parentNode;t!==document.body&&(t.parentNode.insertBefore(e,t),t.parentNode.removeChild(t))},isJqueryLoad:e=>{"undefined"==typeof jQuery?getScript(GLOBAL_CONFIG.source.jQuery).then(e):e()},isHidden:e=>0===e.offsetHeight&&0===e.offsetWidth,getEleTop:e=>{let t=e.offsetTop,o=e.offsetParent;for(;null!==o;)t+=o.offsetTop,o=o.offsetParent;return t},loadLightbox:e=>{const t=GLOBAL_CONFIG.lightbox;if("mediumZoom"===t){e.forEach((e=>{if(e&&e.dataset&&e.dataset.lazySrc&&!1!==e.dataset.lazySrc.includes("!articlesimg")){const t=e.dataset.lazySrc;e.setAttribute("data-zoom-src",t+"_hd")}}));mediumZoom(e).on("open")}"fancybox"===t&&(e.forEach((e=>{if("A"!==e.parentNode.tagName){const t=e.dataset.lazySrc||e.src,o=e.title||e.alt||"";pty.wrap(e,"a",{class:"fancybox",href:t,"data-fancybox":"gallery","data-caption":o,"data-thumb":t})}})),window.fancyboxRun||(Fancybox.bind("[data-fancybox]",{Hash:!1,Thumbs:{autoStart:!1}}),window.fancyboxRun=!0))},initJustifiedGallery:function(e){e.forEach((function(e){pty.isHidden(e)||fjGallery(e,{itemSelector:".fj-gallery-item",rowHeight:220,gutter:4,onJustify:function(){this.$container.style.opacity="1"}})}))},updateAnchor:e=>{if(e!==window.location.hash){e||(e=location.pathname);const t=GLOBAL_CONFIG_SITE.title;window.history.replaceState({url:location.href,title:t},t,e)}},darkModeStatus:function(){"light"==("dark"===document.documentElement.getAttribute("data-theme")?"dark":"light")?$(".menu-darkmode-text").text("æ·±è‰²æ¨¡å¼"):$(".menu-darkmode-text").text("æµ…è‰²æ¨¡å¼")},onlyHome:function(){var e=window.location.pathname;"/"==(e=decodeURIComponent(e))?$(".only-home").attr("style","display: flex"):$(".only-home").attr("style","display: none")},is_Post:function(){return window.location.href.indexOf("/p/")>=0},addNavBackgroundInit:function(){var e=0,t=0;document.body&&(e=document.body.scrollTop),document.documentElement&&(t=document.documentElement.scrollTop),0!=(e-t>0?e:t)&&(document.getElementById("page-header").classList.add("nav-fixed"),document.getElementById("page-header").classList.add("nav-visible"))},tagPageActive:function(){var e=window.location.pathname;if(/\/tags\/.*?\//.test(e=decodeURIComponent(e))){var t=e.split("/")[2];if(document.querySelector("#tag-page-tags")){$("a").removeClass("select");var o=document.getElementById(t);o&&(o.classList.add("select"),o.style.order="-1")}}},categoriesBarActive:function(){document.querySelector("#category-bar")&&$(".category-bar-item").removeClass("select");var e=window.location.pathname;if("/"==(e=decodeURIComponent(e)))document.querySelector("#category-bar")&&document.getElementById("category-bar-home").classList.add("select");else if(/\/categories\/.*?\//.test(e)){var t=e.split("/")[2];if(document.querySelector("#category-bar")){var o=document.getElementById(t);o&&(o.classList.add("select"),o.style.order="-1")}}},addFriendLinksInFooter:function(){let e=Array.from(flinksAll),t=[];for(;t.length<2&&e.length>0;){let o=Math.floor(Math.random()*e.length);t.push(e.splice(o,1)[0])}let o="";for(let e=0;e<t.length;++e){let n=t[e];o+=`<a class='footer-item' href='${n.link}' target="_blank" rel="noopener nofollow">${n.name}</a>`}o+="<a class='footer-item' href='/link'>æ›´å¤š</a>",document.getElementById("friend-links-in-footer").innerHTML=o,e=null},stopImgRightDrag:function(){$("img").on("dragstart",(function(){return!1}))},topPostScroll:function(){if(document.getElementById("recent-post-top")){let e=document.getElementById("recent-post-top");e.addEventListener("mousewheel",(function(t){e.scrollLeft+=-t.wheelDelta/2,document.body.clientWidth<1300&&t.preventDefault()}),{passive:!1})}},sayhi:function(){document.querySelector("#author-info__sayhi")&&(document.getElementById("author-info__sayhi").innerHTML=getTimeState())},addTag:function(){document.querySelector(".lhl-tag-new")&&$(".lhl-tag-new").append('<sup class="lhl-tag lhl-tag-new-view">N</sup>'),document.querySelector(".lhl-tag-hot")&&$(".lhl-tag-hot").append('<sup class="lhl-tag lhl-tag-hot-view">H</sup>')},qrcodeCreate:function(){if(document.getElementById("qrcode")){document.getElementById("qrcode").innerHTML="";new QRCode(document.getElementById("qrcode"),{text:window.location.href,width:250,height:250,colorDark:"#000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.H})}},changeTimeFormate:function(){if(document.querySelector(".bber-info-time"))for(var e=document.getElementsByTagName("time"),t=0;t<e.length;t++){var o,n=e[t].getAttribute("datetime"),a=new Date(n),i=(new Date).getTime()-a.getTime(),r=Math.floor(i/864e5);o=0===r?"ä»Šå¤©":1===r?"æ˜¨å¤©":2===r?"å‰å¤©":r<=7?r+"å¤©å‰":a.getFullYear()!==(new Date).getFullYear()?a.getFullYear()+"/"+(a.getMonth()+1)+"/"+a.getDate():a.getMonth()+1+"/"+a.getDate(),e[t].textContent=o}},downloadImage:function(e,t){rm.hideRightMenu(),0==rm.downloadimging?(rm.downloadimging=!0,pty.snackbarShow("æ­£åœ¨ä¸‹è½½ä¸­ï¼Œè¯·ç¨å",!1,1e4),setTimeout((function(){let o=new Image;o.setAttribute("crossOrigin","anonymous"),o.onload=function(){let e=document.createElement("canvas");e.width=o.width,e.height=o.height,e.getContext("2d").drawImage(o,0,0,o.width,o.height);let n=e.toDataURL("image/png"),a=document.createElement("a"),i=new MouseEvent("click");a.download=t||"photo",a.href=n,a.dispatchEvent(i)},o.src=e,pty.snackbarShow("å›¾ç‰‡å·²æ·»åŠ ç›²æ°´å°ï¼Œè¯·éµå®ˆç‰ˆæƒåè®®"),rm.downloadimging=!1}),"10000")):pty.snackbarShow("æœ‰æ­£åœ¨è¿›è¡Œä¸­çš„ä¸‹è½½ï¼Œè¯·ç¨åå†è¯•")},switchCommentBarrage:function(){document.querySelector(".comment-barrage")&&($(".comment-barrage").is(":visible")?($(".comment-barrage").hide(),$(".menu-commentBarrage-text").text("æ˜¾ç¤ºçƒ­è¯„"),document.querySelector("#consoleCommentBarrage").classList.remove("on"),localStorage.setItem("commentBarrageSwitch","false")):$(".comment-barrage").is(":hidden")&&($(".comment-barrage").show(),$(".menu-commentBarrage-text").text("å…³é—­çƒ­è¯„"),document.querySelector("#consoleCommentBarrage").classList.add("on"),localStorage.removeItem("commentBarrageSwitch"))),rm.hideRightMenu()},hideCookie:function(){LHL_cookiesTime=setTimeout((()=>{document.getElementById("cookies-window").classList.add("cw-hide"),setTimeout((()=>{$("#cookies-window").hide()}),1e3)}),5e3)},privacyRead:function(){window.location.href.indexOf("privacy")>=0&&localStorage.setItem("read-privacy-policy","true"),"true"!==localStorage.getItem("read-privacy-policy")&&($("#cookies-window").show(),pty.hideCookie())},hideTodayCard:function(){document.getElementById("todayCard")&&document.getElementById("todayCard").classList.add("hide")},changeThemeColor:function(e){null!==document.querySelector('meta[name="theme-color"]')&&(document.querySelector('meta[name="theme-color"]').setAttribute("content",e),document.querySelector('meta[name="apple-mobile-web-app-status-bar-style"]').setAttribute("content",e))},initThemeColor:function(){const e=window.scrollY||document.documentElement.scrollTop;if(pty.is_Post()){if(e>0){let e=getComputedStyle(document.documentElement).getPropertyValue("--LHL-card-bg");pty.changeThemeColor(e)}else if(0===e){let e=getComputedStyle(document.documentElement).getPropertyValue("--LHL-main");pty.changeThemeColor(e)}}else if(e>0){let e=getComputedStyle(document.documentElement).getPropertyValue("--LHL-card-bg");pty.changeThemeColor(e)}else if(0===e){let e=getComputedStyle(document.documentElement).getPropertyValue("--LHL-background");pty.changeThemeColor(e)}},jumpTo:function(e){$(document).ready((function(){$("html,body").animate({scrollTop:$(e).eq(i).offset().top},500)}))},changeCanonical:function(){let e=window.location.href;document.querySelector('link[rel="canonical"]').setAttribute("href",e)},showLoading:function(){document.querySelector("#loading-box").classList.remove("loaded");let e=getComputedStyle(document.documentElement).getPropertyValue("--LHL-card-bg");pty.changeThemeColor(e)},hideLoading:function(){document.querySelector("#loading-box").classList.add("loaded"),LHLGPT.aiExplanation()},addMediumInEssay:function(){document.querySelector("#waterfall")&&mediumZoom(document.querySelectorAll("[data-zoomable]"))},musicSkipBack:function(){document.querySelector("meting-js").aplayer.skipBack(),rm.hideRightMenu()},musicSkipForward:function(){document.querySelector("meting-js").aplayer.skipForward(),rm.hideRightMenu()},musicGetName:function(){for(var e=$(".aplayer-title"),t=[],o=e.length-1;o>=0;o--)t[o]=e[o].innerText;return t[0]},showConsole:function(){document.querySelector("#console").classList.add("show"),pty.initConsoleState()},hideConsole:function(){document.querySelector("#console").classList.remove("show")},keyboardToggle:function(){LHL_keyboard?(LHL_keyboard=!1,document.querySelector("#consoleKeyboard").classList.remove("on"),localStorage.setItem("keyboardToggle","false")):(LHL_keyboard=!0,document.querySelector("#consoleKeyboard").classList.add("on"),localStorage.setItem("keyboardToggle","true"))},scrollTo:function(e){const t=document.getElementById(e);if(t){const e=t.getBoundingClientRect().top+window.pageYOffset-80,o=window.pageYOffset,n=e-o;let a=null;window.requestAnimationFrame((function e(t){a||(a=t);const i=t-a,r=(l=Math.min(i/0,1))<.5?2*l*l:(4-2*l)*l-1;var l;window.scrollTo(0,o+n*r),i<600&&window.requestAnimationFrame(e)}))}},hideAsideBtn:()=>{const e=document.documentElement.classList;e.contains("hide-aside")?saveToLocal.set("aside-status","show",2):saveToLocal.set("aside-status","hide",2),e.toggle("hide-aside"),e.contains("hide-aside")?document.querySelector("#consoleHideAside").classList.add("on"):document.querySelector("#consoleHideAside").classList.remove("on")},initConsoleState:function(){document.documentElement.classList.contains("hide-aside")?document.querySelector("#consoleHideAside").classList.add("on"):document.querySelector("#consoleHideAside").classList.remove("on")},removeBodyPaceClass:function(){$("body").removeClass(),$("body").addClass("pace-done")},topGroup:function(){$(".topGroup").hover((function(){}),(function(){hoverOnCommentBarrage=!1,document.getElementById("todayCard").classList.remove("hide"),document.getElementById("todayCard").style.zIndex=1}))},toPage:function(){console.log("æ‰§è¡Œè·³è½¬");var e=document.querySelectorAll(".page-number"),t=parseInt(e[e.length-1].innerHTML),o=document.getElementById("toPageText"),n=parseInt(o.value);if(!isNaN(n)&&n>0&&"0"!==(""+n)[0]&&n<=t){var a="/page/"+n+"/";document.getElementById("toPageButton").href=a}},changeSayHelloText:function(){const e=["ğŸ¤–ï¸ æ•°ç ç§‘æŠ€çˆ±å¥½è€…","ğŸ” åˆ†äº«ä¸çƒ­å¿ƒå¸®åŠ©","ğŸ  æ™ºèƒ½å®¶å±…å°èƒ½æ‰‹","ğŸ”¨ è®¾è®¡å¼€å‘ä¸€æ¡é¾™","ğŸ¤ ä¸“ä¿®äº¤äº’ä¸è®¾è®¡","ğŸƒ è„šè¸å®åœ°è¡ŒåŠ¨æ´¾","ğŸ§± å›¢é˜Ÿå°ç»„å‘åŠ¨æœº","ğŸ’¢ å£®æ±‰äººç‹ è¯ä¸å¤š"],t=document.getElementById("author-info__sayhi");let o=e[Math.floor(Math.random()*e.length)];for(;o===lastSayHello;)o=e[Math.floor(Math.random()*e.length)];t.textContent=o,lastSayHello=o},scrollCategoryBarToRight:function(){var e=document.getElementById("category-bar-items"),t=document.getElementById("category-bar-next"),o=e.clientWidth;e&&(e.scrollLeft+e.clientWidth>=e.scrollWidth?(e.scroll({left:0,behavior:"smooth"}),t.innerHTML='<i class="lhlfont icon-right-arrow-double"></i>'):e.scrollBy({left:o,behavior:"smooth"}))},addRandomCommentInfo:function(){const e=`${adjectives[Math.floor(Math.random()*adjectives.length)]}${vegetablesAndFruits[Math.floor(Math.random()*vegetablesAndFruits.length)]}`;!function(){let t=["#author","input[name='comname']","#inpName","input[name='author']","#ds-dialog-name","#name","input[name='nick']","#comment_author"],o=["#mail","#email","input[name='commail']","#inpEmail","input[name='email']","#ds-dialog-email","input[name='mail']","#comment_email"];for(let o=0;o<t.length;o++){let n=document.querySelector(t[o]);if(null!=n){n.value=e,n.dispatchEvent(new Event("input")),n.dispatchEvent(new Event("change"));break}}for(let e=0;e<o.length;e++){let t=document.querySelector(o[e]);if(null!=t){t.value="visitor@lhliang.com",t.dispatchEvent(new Event("input")),t.dispatchEvent(new Event("change"));break}}}();let t=document.getElementsByClassName("el-textarea__inner")[0];t.focus(),t.setSelectionRange(-1,-1)},lottieAnimation:function(e){var t=document.getElementById(e);lottie.loadAnimation({container:t,renderer:"svg",loop:!0,autoplay:!0,path:"/lottie/"+e+"/data.json"})}};var supportsPassive=!1;try{var opts=Object.defineProperty({},"passive",{get:function(){supportsPassive=!0}});window.addEventListener("testPassive",null,opts),window.removeEventListener("testPassive",null,opts)}catch(e){}const adjectives=["ç¾ä¸½çš„","è‹±ä¿Šçš„","èªæ˜çš„","å‹‡æ•¢çš„","å¯çˆ±çš„","æ…·æ…¨çš„","å–„è‰¯çš„","å¯é çš„","å¼€æœ—çš„","æˆç†Ÿçš„","ç¨³é‡çš„","çœŸè¯šçš„","å¹½é»˜çš„","è±è¾¾çš„","æœ‰è¶£çš„","æ´»æ³¼çš„","ä¼˜é›…çš„","æ•æ·çš„","æ¸©æŸ”çš„","æ¸©æš–çš„","æ•¬ä¸šçš„","ç»†å¿ƒçš„","è€å¿ƒçš„","æ·±æ²‰çš„","æœ´ç´ çš„","å«è“„çš„","ç‡ç›´çš„","å¼€æ”¾çš„","åŠ¡å®çš„","åšå¼ºçš„","è‡ªä¿¡çš„","è°¦è™šçš„","æ–‡é™çš„","æ·±åˆ»çš„","çº¯çœŸçš„","æœæ°”è“¬å‹ƒçš„","æ…é‡çš„","å¤§æ–¹çš„","é¡½å¼ºçš„","è¿·äººçš„","æœºæ™ºçš„","å–„è§£äººæ„çš„","å¯Œæœ‰æƒ³è±¡åŠ›çš„","æœ‰é­…åŠ›çš„","ç‹¬ç«‹çš„","å¥½å¥‡çš„","å¹²å‡€çš„","å®½å®¹çš„","å°Šé‡ä»–äººçš„","ä½“è´´çš„","å®ˆä¿¡çš„","æœ‰è€æ€§çš„","æœ‰è´£ä»»å¿ƒçš„","æœ‰æ‹…å½“çš„","æœ‰è¿œè§çš„","æœ‰æ™ºæ…§çš„","æœ‰çœ¼å…‰çš„","æœ‰å†’é™©ç²¾ç¥çš„","æœ‰çˆ±å¿ƒçš„","æœ‰åŒæƒ…å¿ƒçš„","å–œæ¬¢æ€è€ƒçš„","å–œæ¬¢å­¦ä¹ çš„","å…·æœ‰æ‰¹åˆ¤æ€§æ€ç»´çš„","å–„äºè¡¨è¾¾çš„","å–„äºæ²Ÿé€šçš„","å–„äºåˆä½œçš„","å–„äºé¢†å¯¼çš„","æœ‰æ¿€æƒ…çš„","æœ‰å¹½é»˜æ„Ÿçš„","æœ‰æ€æƒ³çš„","æœ‰ä¸ªæ€§çš„","æœ‰æ­£ä¹‰æ„Ÿçš„","æœ‰è´£ä»»æ„Ÿçš„","æœ‰åˆ›é€ åŠ›çš„","æœ‰æƒ³è±¡åŠ›çš„","æœ‰è‰ºæœ¯ç»†èƒçš„","æœ‰å›¢é˜Ÿç²¾ç¥çš„","æœ‰åè°ƒèƒ½åŠ›çš„","æœ‰å†³ç­–èƒ½åŠ›çš„","æœ‰ç»„ç»‡èƒ½åŠ›çš„","æœ‰å­¦ä¹ èƒ½åŠ›çš„","æœ‰æ‰§è¡Œèƒ½åŠ›çš„","æœ‰åˆ†æèƒ½åŠ›çš„","æœ‰é€»è¾‘æ€ç»´çš„","æœ‰åˆ›æ–°èƒ½åŠ›çš„","æœ‰ä¸“ä¸šç´ å…»çš„","æœ‰å•†ä¸šå¤´è„‘çš„"],vegetablesAndFruits=["èåœ","ç™½èœ","èŠ¹èœ","ç”Ÿèœ","é’æ¤’","è¾£æ¤’","èŒ„å­","è±†è§’","é»„ç“œ","è¥¿çº¢æŸ¿","æ´‹è‘±","å¤§è’œ","åœŸè±†","å—ç“œ","è±†è…","éŸ­èœ","èŠ±èœ","è¥¿å…°èŠ±","è˜‘è‡","é‡‘é’ˆè‡","è‹¹æœ","é¦™è•‰","æ©™å­","æŸ æª¬","çŒ•çŒ´æ¡ƒ","è‰è“","è‘¡è„","æ¡ƒå­","æå­","æå­","çŸ³æ¦´","è¥¿ç“œ","å“ˆå¯†ç“œ","èœœç“œ","æ¨±æ¡ƒ","è“è“","æŸ¿å­","æ©„æ¦„","æŸšå­","ç«é¾™æœ"];function checkOpen(){}function coverColor(){const e=document.getElementById("post-cover")?.src;if(e){const t=new XMLHttpRequest;t.open("GET",`${e}?imageAve`,!0),t.send(),t.onreadystatechange=function(){if(4===t.readyState&&200===t.status){let e=`#${JSON.parse(t.responseText).RGB.slice(2)}`;"light"===getContrastYIQ(e)&&(e=LightenDarkenColor(colorHex(e),-50)),updateCSSVariables(e),pty.initThemeColor(),document.getElementById("coverdiv").classList.add("loaded")}else t.onerror=function(){console.error("è·å–å›¾åƒæ—¶å‡ºé”™.")}}}else updateCSSVariables("var(--LHL-theme)"),pty.initThemeColor()}function updateCSSVariables(e){const t=document.styleSheets[0];t.addRule(":root",`--LHL-main: ${e} !important`),t.addRule(":root",`--LHL-main-op: ${e}23 !important`),t.addRule(":root",`--LHL-main-op-deep: ${e}dd !important`),t.addRule(":root",`--LHL-main-none: ${e}00 !important`)}function colorHex(e){if(/^(rgb|RGB)/.test(e)){const t=e.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(",");let o="#";return t.forEach((e=>{let t=(+e).toString(16);1===t.length&&(t=`0${t}`),o+=t})),7===o.length?o:e}if(/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(e)){if(4===e.length){let t="#";for(let o=1;o<e.length;o++)t+=e[o]+e[o];return t}return e}return e}function colorRgb(e){if(/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(e)){if(4===e.length){let t="#";for(let o=1;o<e.length;o++)t+=e[o]+e[o];e=t}const t=[];for(let o=1;o<7;o+=2)t.push(parseInt(e.slice(o,o+2),16));return`rgb(${t.join(",")})`}return e}function LightenDarkenColor(e,t){let o=!1;"#"===e[0]&&(e=e.slice(1),o=!0);let n=parseInt(e,16),a=(n>>16)+t;a=a>255?255:a<0?0:a;let i=(n>>8&255)+t;i=i>255?255:i<0?0:i;let r=(255&n)+t;return r=r>255?255:r<0?0:r,(o?"#":"")+(16777216+65536*a+256*i+r).toString(16).slice(1)}function getContrastYIQ(e){const t=colorRgb(e).match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);return(299*t[1]+587*t[2]+114*t[3])/1e3>=128?"light":"dark"}function navTitle(){const e=document.title;document.getElementById("page-name-text").innerHTML=e.replace(" | åˆ˜æ´ªäº®Leoçš„åšå®¢","")}function showcopy(){if(void 0!==GLOBAL_CONFIG.Snackbar)pty.snackbarShow(GLOBAL_CONFIG.copy.success);else{const e=ctx.previousElementSibling;e.innerText=GLOBAL_CONFIG.copy.success,e.style.opacity=1,setTimeout((()=>{e.style.opacity=0}),700)}}$(document).ready((function(){initBlog()})),document.addEventListener("pjax:send",(function(){clearTimeout(LHL_cookiesTime)})),document.addEventListener("pjax:complete",(function(){LHLGPTIsRunning=!1,LHL_aiPostExplanation="",aiTalkMode=!1,GPTModel="LHLGPT",initBlog()})),document.addEventListener("pjax:click",(function(){console.log("pjax:click")})),checkOpen.toString=function(){this.opened=!0},window.onload=function(){const e=document.getElementsByClassName("copybtn");for(let t=0;t<e.length;t++)e[t].addEventListener("click",showcopy);pty.initThemeColor()};const getTimeState=()=>{const e=(new Date).getHours();return e>=0&&e<=5?"æ—©ç‚¹å„¿ä¼‘æ¯å“¦ï¼":e>5&&e<=10?"æ—©ä¸Šå¥½ï¼Œåˆæ˜¯å……å®çš„ä¸€å¤©ï¼":e>10&&e<=14?"åŠ æ²¹è¿‡å¥½è‡ªå·±çš„ç”Ÿæ´»ï¼":e>14&&e<=18?"æ²¡ä»€ä¹ˆå¯ä»¥é˜»æŒ¡ä½ æƒ³åšçš„äº‹æƒ…ï¼":e>18&&e<=24?"æ•¬ä½ ä¸€æ¯é…’ï¼Œæ„¿ä½ æœ‰è¯—æœ‰æ¢¦ï¼":""},navFn={switchDarkMode:()=>{"light"===("dark"===document.documentElement.getAttribute("data-theme")?"dark":"light")?(activateDarkMode(),saveToLocal.set("theme","dark",2),void 0!==GLOBAL_CONFIG.Snackbar&&pty.snackbarShow(GLOBAL_CONFIG.Snackbar.day_to_night,!1,2e3)):(activateLightMode(),saveToLocal.set("theme","light",2),void 0!==GLOBAL_CONFIG.Snackbar&&pty.snackbarShow(GLOBAL_CONFIG.Snackbar.night_to_day,!1,2e3)),"function"==typeof utterancesTheme&&utterancesTheme(),"object"==typeof FB&&window.loadFBComment(),window.DISQUS&&document.getElementById("disqus_thread").children.length&&setTimeout((()=>window.disqusReset()),200),updateChartColors()}};function updateChartColors(){const e="light"===document.documentElement.getAttribute("data-theme")?"#363636":"#F7F7FA";["posts-chart","tags-chart","categories-chart"].forEach((t=>{if(document.getElementById(t)){const o=window[`${t.replace("-","")}Option`];o.textStyle.color=e,o.title.textStyle.color=e,o.xAxis.axisLine.lineStyle.color=e,o.yAxis.axisLine.lineStyle.color=e,window[`${t.replace("-","")}Chart`].setOption(o)}}))}function RemoveRewardMask(){$(".reward-main").hide(),$("#quit-box").hide()}function AddRewardMask(){$(".reward-main").css("display","flex"),$("#quit-box").css("display","flex")}function travelling(){const e=Array.from(flinksAll),t=e[Math.floor(Math.random()*e.length)];if(t){const{name:e,link:o}=t,n=`ç‚¹å‡»å‰å¾€æŒ‰é’®è¿›å…¥éšæœºä¸€ä¸ªå‹é“¾ï¼Œä¸ä¿è¯è·³è½¬ç½‘ç«™çš„å®‰å…¨æ€§å’Œå¯ç”¨æ€§ã€‚æœ¬æ¬¡éšæœºåˆ°çš„æ˜¯æœ¬ç«™å‹é“¾ï¼šã€Œ${e}ã€`;document.styleSheets[0].addRule(":root","--LHL-snackbar-time: 8000ms !important"),Snackbar.show({text:n,duration:8e3,pos:"top-center",actionText:"å‰å¾€",onActionClick:function(e){$(e).css("opacity",0),window.open(o,"_blank")}})}}function toRandomFlink(){const e=Array.from(flinksAll);window.open(e[Math.floor(Math.random()*e.length)].link)}function removeLoading(){setTimeout((()=>{preloader.endLoading()}),3e3)}function addFriendLink(){const e=document.getElementsByClassName("el-textarea__inner")[0],t=document.createEvent("HTMLEvents");t.initEvent("input",!0,!0),e.value="æ˜µç§°ï¼ˆè¯·å‹¿åŒ…å«åšå®¢ç­‰å­—æ ·ï¼‰ï¼š\nç½‘ç«™åœ°å€ï¼ˆè¦æ±‚åšå®¢åœ°å€ï¼Œè¯·å‹¿æäº¤ä¸ªäººä¸»é¡µï¼‰ï¼š\nå¤´åƒå›¾ç‰‡urlï¼ˆè¯·æä¾›å°½å¯èƒ½æ¸…æ™°çš„å›¾ç‰‡ï¼Œå¹¶ä¸”æ”¯æŒç›´æ¥è®¿é—®ï¼‰ï¼š\næè¿°ï¼š\n",e.dispatchEvent(t),pty.scrollTo("post-comment"),e.focus(),e.setSelectionRange(-1,-1)}function getArrayItems(e,t){const o=[...e],n=[];for(let e=0;e<t&&o.length>0;e++){const e=Math.floor(Math.random()*o.length);n.push(o.splice(e,1)[0])}return n}function initObserver(){const e=document.getElementById("post-comment"),t=document.getElementById("pagination");e&&t&&new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting?(t.classList.add("show-window"),document.querySelector(".comment-barrage").style.bottom="-200px"):(t.classList.remove("show-window"),document.querySelector(".comment-barrage").style.bottom="0px")}))})).observe(e)}function percent(){const e=document.querySelector("#percent"),t=document.querySelector("#nav-totop"),o=document.getElementById("post-tools")||document.getElementById("footer"),n=document.querySelectorAll(".needEndHide");window.onscroll=()=>{const a=document.documentElement.scrollTop||window.pageYOffset,i=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight),r=document.documentElement.clientHeight,l=Math.round(a/(i-r)*100),c=window.scrollY+r;o.offsetTop+o.offsetHeight/2<c||l>90?(t.classList.add("long"),e.innerHTML="è¿”å›é¡¶éƒ¨"):(t.classList.remove("long"),l>=0&&(e.innerHTML=l));const s=i-a-r;n.forEach((e=>{e.classList.toggle("hide",s<100)}))}}function addKeyShotListener(){$(window).off("keydown").off("keyup").on("keydown",keyDownEvent).on("keyup",keyUpEvent)}function keyDownEvent(e){if(27===e.keyCode&&(pty.hideLoading(),pty.hideConsole(),rm.hideRightMenu()),LHL_keyboard&&e.shiftKey&&!LHL_intype)switch(e.keyCode){case 16:document.querySelector("#keyboard-tips").classList.add("show");break;case 75:return pty.keyboardToggle(),!1;case 65:return pty.showConsole(),!1;case 82:return toRandomPost(),!1;case 72:return pjax.loadUrl("/"),!1;case 68:return rm.switchDarkMode(),!1;case 76:return pjax.loadUrl("/link/"),!1;case 80:return pjax.loadUrl("/about/"),!1;case 84:return pjax.loadUrl("/stars/"),!1}}function keyUpEvent(e){16===e.keyCode&&document.querySelector("#keyboard-tips").classList.remove("show")}function open_all_tags(){document.querySelectorAll(".card-allinfo .card-tag-cloud").forEach((e=>{e.classList.add("all-tags")}));const e=document.getElementById("more-tags-btn");e&&e.parentNode.removeChild(e)}function listenToPageInputPress(){const e=document.getElementById("toPageText"),t=document.getElementById("toPageButton");e&&(e.addEventListener("keydown",(e=>{13===e.keyCode&&(pty.toPage(),pjax.loadUrl(t.href))})),e.addEventListener("input",(()=>{""===e.value||"0"===e.value?t.classList.remove("haveValue"):t.classList.add("haveValue");const o=document.querySelectorAll(".page-number"),n=+o[o.length-1].innerHTML;+e.value>n&&(e.value=n)})))}function initBlog(){window.commentBarrageInitialized=!1,coverColor(),addRightMenuClickEvent(),navTitle(),percent(),listenToPageInputPress(),pty.topPostScroll(),pty.sayhi(),pty.addTag(),pty.stopImgRightDrag(),pty.addFriendLinksInFooter(),pty.qrcodeCreate(),pty.privacyRead(),pty.onlyHome(),pty.addNavBackgroundInit(),pty.changeTimeFormate(),pty.darkModeStatus(),pty.categoriesBarActive(),pty.tagPageActive(),pty.removeBodyPaceClass(),pty.changeCanonical(),pty.lottieAnimation("footer_mini_logo"),pty.lottieAnimation("lottie_avatar"),LHLGPT.aiExplanation(),AIEngine(),addAIToggleListener(),pty.topGroup(),pty.hideLoading(),initObserver(),initializeCommentBarrage()}document.addEventListener("touchstart",(()=>{RemoveRewardMask()}),!1),$(document).unbind("keydown").bind("keydown",(e=>{if((e.ctrlKey||e.metaKey)&&67===e.keyCode&&""!==selectTextNow)return pty.snackbarShow("å¤åˆ¶æˆåŠŸï¼Œå¤åˆ¶å’Œè½¬è½½è¯·æ ‡æ³¨æœ¬æ–‡åœ°å€"),rm.rightmenuCopyText(selectTextNow),!1})),document.addEventListener("scroll",pty.throttle((()=>{pty.initThemeColor()}),200)),navigator.serviceWorker.getRegistrations().then((e=>{e.forEach((e=>{e.unregister()}))})),window.onkeydown=function(e){123===e.keyCode&&pty.snackbarShow("å¼€å‘è€…æ¨¡å¼å·²æ‰“å¼€ï¼Œè¯·éµå¾ªGPLåè®®",!1,3e3)},"true"===localStorage.getItem("keyboardToggle")?(document.querySelector("#consoleKeyboard").classList.add("on"),LHL_keyboard=!0):(document.querySelector("#consoleKeyboard").classList.remove("on"),LHL_keyboard=!1),addKeyShotListener(),$("input").focus((()=>{LHL_intype=!0})).focusout((()=>{LHL_intype=!1})),$("textarea").focus((()=>{LHL_intype=!0})).focusout((()=>{LHL_intype=!1})),window.onfocus=function(){document.querySelector("#keyboard-tips").classList.remove("show")},document.addEventListener("pjax:click",(function(){console.clear(),Pace.restart(),pty.showLoading(),$(window).prop("keydown",null).off("keydown")}));