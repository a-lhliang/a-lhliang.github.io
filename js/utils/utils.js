let LHL_musicPlaying=!1,LHL_keyboard=!1,LHL_intype=!1,lhlgpt=null,LHL_cookiesTime=null,lastSayHello="";const pty={debounce:function(e,t,o){let n;return function(){const a=this,i=arguments,r=o&&!n;clearTimeout(n),n=setTimeout((function(){n=null,o||e.apply(a,i)}),t),r&&e.apply(a,i)}},throttle:function(e,t,o={}){let n,a,i,r=0;const l=function(){r=!1===o.leading?0:Date.now(),n=null,e.apply(a,i),n||(a=i=null)};return function(){const c=Date.now();r||!1!==o.leading||(r=c);const s=t-(c-r);a=this,i=arguments,s<=0||s>t?(n&&(clearTimeout(n),n=null),r=c,e.apply(a,i),n||(a=i=null)):n||!1===o.trailing||(n=setTimeout(l,s))}},snackbarShow:(e,t=!1,o=2e3)=>{const{position:n,bgLight:a,bgDark:i}=GLOBAL_CONFIG.Snackbar,r="light"===document.documentElement.getAttribute("data-theme")?a:i;Snackbar.show({text:e,backgroundColor:r,showAction:t,duration:o,pos:n,customClass:"snackbar-css"})},diffDate:(e,t=!1)=>{const o=new Date,n=new Date(e),a=o.getTime()-n.getTime(),i=36e5,r=24*i,{date_suffix:l}=GLOBAL_CONFIG;if(!t)return parseInt(a/r);const c=a/2592e6,s=a/r,d=a/i,u=a/6e4;return c>12?n.toISOString().slice(0,10):c>=1?`${parseInt(c)} ${l.month}`:s>=1?`${parseInt(s)} ${l.day}`:d>=1?`${parseInt(d)} ${l.hour}`:u>=1?`${parseInt(u)} ${l.min}`:l.just},loadComment:(e,t)=>{if("IntersectionObserver"in window){const o=new IntersectionObserver((e=>{e[0].isIntersecting&&(t(),o.disconnect())}),{threshold:[0]});o.observe(e)}else t()},scrollToDest:(e,t=500)=>{const o=window.pageYOffset;if(o>e&&(e-=70),"scrollBehavior"in document.documentElement.style)return void window.scrollTo({top:e,behavior:"smooth"});let n=null;e=+e,window.requestAnimationFrame((function a(i){n=n||i;const r=i-n;o<e?window.scrollTo(0,(e-o)*r/t+o):window.scrollTo(0,o-(o-e)*r/t),r<t?window.requestAnimationFrame(a):window.scrollTo(0,e)}))},animateIn:(e,t)=>{e.style.display="block",e.style.animation=t},animateOut:(e,t)=>{e.addEventListener("animationend",(function t(){e.style.display="",e.style.animation="",e.removeEventListener("animationend",t)})),e.style.animation=t},getParents:(e,t)=>{for(;e&&e!==document;e=e.parentNode)if(e.matches(t))return e;return null},siblings:(e,t)=>[...e.parentNode.children].filter((o=>t?o!==e&&o.matches(t):o!==e)),wrap:(e,t,o)=>{const n=document.createElement(t);for(const[e,t]of Object.entries(o))n.setAttribute(e,t);e.parentNode.insertBefore(n,e),n.appendChild(e)},unwrap:e=>{const t=e.parentNode;t!==document.body&&(t.parentNode.insertBefore(e,t),t.parentNode.removeChild(t))},isJqueryLoad:e=>{"undefined"==typeof jQuery?getScript(GLOBAL_CONFIG.source.jQuery).then(e):e()},isHidden:e=>0===e.offsetHeight&&0===e.offsetWidth,getEleTop:e=>{let t=e.offsetTop,o=e.offsetParent;for(;null!==o;)t+=o.offsetTop,o=o.offsetParent;return t},loadLightbox:e=>{const t=GLOBAL_CONFIG.lightbox;if("mediumZoom"===t){e.forEach((e=>{if(e&&e.dataset&&e.dataset.lazySrc&&!1!==e.dataset.lazySrc.includes("!articlesimg")){const t=e.dataset.lazySrc;e.setAttribute("data-zoom-src",t+"_hd")}}));mediumZoom(e).on("open")}"fancybox"===t&&(e.forEach((e=>{if("A"!==e.parentNode.tagName){const t=e.dataset.lazySrc||e.src,o=e.title||e.alt||"";pty.wrap(e,"a",{class:"fancybox",href:t,"data-fancybox":"gallery","data-caption":o,"data-thumb":t})}})),window.fancyboxRun||(Fancybox.bind("[data-fancybox]",{Hash:!1,Thumbs:{autoStart:!1}}),window.fancyboxRun=!0))},initJustifiedGallery:function(e){e.forEach((function(e){pty.isHidden(e)||fjGallery(e,{itemSelector:".fj-gallery-item",rowHeight:220,gutter:4,onJustify:function(){this.$container.style.opacity="1"}})}))},updateAnchor:e=>{if(e!==window.location.hash){e||(e=location.pathname);const t=GLOBAL_CONFIG_SITE.title;window.history.replaceState({url:location.href,title:t},t,e)}},darkModeStatus:function(){"light"==("dark"===document.documentElement.getAttribute("data-theme")?"dark":"light")?$(".menu-darkmode-text").text("深色模式"):$(".menu-darkmode-text").text("浅色模式")},onlyHome:function(){var e=window.location.pathname;"/"==(e=decodeURIComponent(e))?$(".only-home").attr("style","display: flex"):$(".only-home").attr("style","display: none")},is_Post:function(){return window.location.href.indexOf("/p/")>=0},addNavBackgroundInit:function(){var e=0,t=0;document.body&&(e=document.body.scrollTop),document.documentElement&&(t=document.documentElement.scrollTop),0!=(e-t>0?e:t)&&(document.getElementById("page-header").classList.add("nav-fixed"),document.getElementById("page-header").classList.add("nav-visible"))},tagPageActive:function(){var e=window.location.pathname;if(/\/tags\/.*?\//.test(e=decodeURIComponent(e))){var t=e.split("/")[2];if(document.querySelector("#tag-page-tags")){$("a").removeClass("select");var o=document.getElementById(t);o&&(o.classList.add("select"),o.style.order="-1")}}},categoriesBarActive:function(){document.querySelector("#category-bar")&&$(".category-bar-item").removeClass("select");var e=window.location.pathname;if("/"==(e=decodeURIComponent(e)))document.querySelector("#category-bar")&&document.getElementById("category-bar-home").classList.add("select");else if(/\/categories\/.*?\//.test(e)){var t=e.split("/")[2];if(document.querySelector("#category-bar")){var o=document.getElementById(t);o&&(o.classList.add("select"),o.style.order="-1")}}},addFriendLinksInFooter:function(){let e=Array.from(flinksAll),t=[];for(;t.length<2&&e.length>0;){let o=Math.floor(Math.random()*e.length);t.push(e.splice(o,1)[0])}let o="";for(let e=0;e<t.length;++e){let n=t[e];o+=`<a class='footer-item' href='${n.link}' target="_blank" rel="noopener nofollow">${n.name}</a>`}o+="<a class='footer-item' href='/link'>更多</a>",document.getElementById("friend-links-in-footer").innerHTML=o,e=null},stopImgRightDrag:function(){$("img").on("dragstart",(function(){return!1}))},topPostScroll:function(){if(document.getElementById("recent-post-top")){let e=document.getElementById("recent-post-top");e.addEventListener("mousewheel",(function(t){e.scrollLeft+=-t.wheelDelta/2,document.body.clientWidth<1300&&t.preventDefault()}),{passive:!1})}},sayhi:function(){document.querySelector("#author-info__sayhi")&&(document.getElementById("author-info__sayhi").innerHTML=getTimeState())},addTag:function(){document.querySelector(".lhl-tag-new")&&$(".lhl-tag-new").append('<sup class="lhl-tag lhl-tag-new-view">N</sup>'),document.querySelector(".lhl-tag-hot")&&$(".lhl-tag-hot").append('<sup class="lhl-tag lhl-tag-hot-view">H</sup>')},qrcodeCreate:function(){if(document.getElementById("qrcode")){document.getElementById("qrcode").innerHTML="";new QRCode(document.getElementById("qrcode"),{text:window.location.href,width:250,height:250,colorDark:"#000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.H})}},changeTimeFormate:function(){if(document.querySelector(".bber-info-time"))for(var e=document.getElementsByTagName("time"),t=0;t<e.length;t++){var o,n=e[t].getAttribute("datetime"),a=new Date(n),i=(new Date).getTime()-a.getTime(),r=Math.floor(i/864e5);o=0===r?"今天":1===r?"昨天":2===r?"前天":r<=7?r+"天前":a.getFullYear()!==(new Date).getFullYear()?a.getFullYear()+"/"+(a.getMonth()+1)+"/"+a.getDate():a.getMonth()+1+"/"+a.getDate(),e[t].textContent=o}},downloadImage:function(e,t){rm.hideRightMenu(),0==rm.downloadimging?(rm.downloadimging=!0,pty.snackbarShow("正在下载中，请稍后",!1,1e4),setTimeout((function(){let o=new Image;o.setAttribute("crossOrigin","anonymous"),o.onload=function(){let e=document.createElement("canvas");e.width=o.width,e.height=o.height,e.getContext("2d").drawImage(o,0,0,o.width,o.height);let n=e.toDataURL("image/png"),a=document.createElement("a"),i=new MouseEvent("click");a.download=t||"photo",a.href=n,a.dispatchEvent(i)},o.src=e,pty.snackbarShow("图片已添加盲水印，请遵守版权协议"),rm.downloadimging=!1}),"10000")):pty.snackbarShow("有正在进行中的下载，请稍后再试")},switchCommentBarrage:function(){document.querySelector(".comment-barrage")&&($(".comment-barrage").is(":visible")?($(".comment-barrage").hide(),$(".menu-commentBarrage-text").text("显示热评"),document.querySelector("#consoleCommentBarrage").classList.remove("on"),localStorage.setItem("commentBarrageSwitch","false")):$(".comment-barrage").is(":hidden")&&($(".comment-barrage").show(),$(".menu-commentBarrage-text").text("关闭热评"),document.querySelector("#consoleCommentBarrage").classList.add("on"),localStorage.removeItem("commentBarrageSwitch"))),rm.hideRightMenu()},hideCookie:function(){LHL_cookiesTime=setTimeout((()=>{document.getElementById("cookies-window").classList.add("cw-hide"),setTimeout((()=>{$("#cookies-window").hide()}),1e3)}),5e3)},privacyRead:function(){window.location.href.indexOf("privacy")>=0&&localStorage.setItem("read-privacy-policy","true"),"true"!==localStorage.getItem("read-privacy-policy")&&($("#cookies-window").show(),pty.hideCookie())},hideTodayCard:function(){document.getElementById("todayCard")&&document.getElementById("todayCard").classList.add("hide")},changeThemeColor:function(e){null!==document.querySelector('meta[name="theme-color"]')&&(document.querySelector('meta[name="theme-color"]').setAttribute("content",e),document.querySelector('meta[name="apple-mobile-web-app-status-bar-style"]').setAttribute("content",e))},initThemeColor:function(){const e=window.scrollY||document.documentElement.scrollTop;if(pty.is_Post()){if(e>0){let e=getComputedStyle(document.documentElement).getPropertyValue("--LHL-card-bg");pty.changeThemeColor(e)}else if(0===e){let e=getComputedStyle(document.documentElement).getPropertyValue("--LHL-main");pty.changeThemeColor(e)}}else if(e>0){let e=getComputedStyle(document.documentElement).getPropertyValue("--LHL-card-bg");pty.changeThemeColor(e)}else if(0===e){let e=getComputedStyle(document.documentElement).getPropertyValue("--LHL-background");pty.changeThemeColor(e)}},jumpTo:function(e){$(document).ready((function(){$("html,body").animate({scrollTop:$(e).eq(i).offset().top},500)}))},changeCanonical:function(){let e=window.location.href;document.querySelector('link[rel="canonical"]').setAttribute("href",e)},showLoading:function(){document.querySelector("#loading-box").classList.remove("loaded");let e=getComputedStyle(document.documentElement).getPropertyValue("--LHL-card-bg");pty.changeThemeColor(e)},hideLoading:function(){document.querySelector("#loading-box").classList.add("loaded"),LHLGPT.aiExplanation()},showConsole:function(){document.querySelector("#console").classList.add("show"),pty.initConsoleState()},hideConsole:function(){document.querySelector("#console").classList.remove("show")},keyboardToggle:function(){LHL_keyboard?(LHL_keyboard=!1,document.querySelector("#consoleKeyboard").classList.remove("on"),localStorage.setItem("keyboardToggle","false")):(LHL_keyboard=!0,document.querySelector("#consoleKeyboard").classList.add("on"),localStorage.setItem("keyboardToggle","true"))},scrollTo:function(e){const t=document.getElementById(e);if(t){const e=t.getBoundingClientRect().top+window.pageYOffset-80,o=window.pageYOffset,n=e-o;let a=null;window.requestAnimationFrame((function e(t){a||(a=t);const i=t-a,r=(l=Math.min(i/0,1))<.5?2*l*l:(4-2*l)*l-1;var l;window.scrollTo(0,o+n*r),i<600&&window.requestAnimationFrame(e)}))}},hideAsideBtn:()=>{const e=document.documentElement.classList;e.contains("hide-aside")?saveToLocal.set("aside-status","show",2):saveToLocal.set("aside-status","hide",2),e.toggle("hide-aside"),e.contains("hide-aside")?document.querySelector("#consoleHideAside").classList.add("on"):document.querySelector("#consoleHideAside").classList.remove("on")},initConsoleState:function(){document.documentElement.classList.contains("hide-aside")?document.querySelector("#consoleHideAside").classList.add("on"):document.querySelector("#consoleHideAside").classList.remove("on")},removeBodyPaceClass:function(){$("body").removeClass(),$("body").addClass("pace-done")},topGroup:function(){$(".topGroup").hover((function(){}),(function(){hoverOnCommentBarrage=!1,document.getElementById("todayCard").classList.remove("hide"),document.getElementById("todayCard").style.zIndex=1}))},toPage:function(){console.log("执行跳转");var e=document.querySelectorAll(".page-number"),t=parseInt(e[e.length-1].innerHTML),o=document.getElementById("toPageText"),n=parseInt(o.value);if(!isNaN(n)&&n>0&&"0"!==(""+n)[0]&&n<=t){var a="/page/"+n+"/";document.getElementById("toPageButton").href=a}},changeSayHelloText:function(){const e=["🤖️ 数码科技爱好者","🔍 分享与热心帮助","🏠 智能家居小能手","🔨 设计开发一条龙","🤝 专修交互与设计","🏃 脚踏实地行动派","🧱 团队小组发动机","💢 壮汉人狠话不多"],t=document.getElementById("author-info__sayhi");let o=e[Math.floor(Math.random()*e.length)];for(;o===lastSayHello;)o=e[Math.floor(Math.random()*e.length)];t.textContent=o,lastSayHello=o},scrollCategoryBarToRight:function(){var e=document.getElementById("category-bar-items"),t=document.getElementById("category-bar-next"),o=e.clientWidth;e&&(e.scrollLeft+e.clientWidth>=e.scrollWidth?(e.scroll({left:0,behavior:"smooth"}),t.innerHTML='<i class="lhlfont icon-right-arrow-double"></i>'):e.scrollBy({left:o,behavior:"smooth"}))},addRandomCommentInfo:function(){const e=`${adjectives[Math.floor(Math.random()*adjectives.length)]}${vegetablesAndFruits[Math.floor(Math.random()*vegetablesAndFruits.length)]}`;!function(){let t=["#author","input[name='comname']","#inpName","input[name='author']","#ds-dialog-name","#name","input[name='nick']","#comment_author"],o=["#mail","#email","input[name='commail']","#inpEmail","input[name='email']","#ds-dialog-email","input[name='mail']","#comment_email"];for(let o=0;o<t.length;o++){let n=document.querySelector(t[o]);if(null!=n){n.value=e,n.dispatchEvent(new Event("input")),n.dispatchEvent(new Event("change"));break}}for(let e=0;e<o.length;e++){let t=document.querySelector(o[e]);if(null!=t){t.value="visitor@lhliang.com",t.dispatchEvent(new Event("input")),t.dispatchEvent(new Event("change"));break}}}();let t=document.getElementsByClassName("el-textarea__inner")[0];t.focus(),t.setSelectionRange(-1,-1)},lottieAnimation:function(e){var t=document.getElementById(e);lottie.loadAnimation({container:t,renderer:"svg",loop:!0,autoplay:!0,path:"/lottie/"+e+"/data.json"})}};var supportsPassive=!1;try{var opts=Object.defineProperty({},"passive",{get:function(){supportsPassive=!0}});window.addEventListener("testPassive",null,opts),window.removeEventListener("testPassive",null,opts)}catch(e){}const adjectives=["美丽的","英俊的","聪明的","勇敢的","可爱的","慷慨的","善良的","可靠的","开朗的","成熟的","稳重的","真诚的","幽默的","豁达的","有趣的","活泼的","优雅的","敏捷的","温柔的","温暖的","敬业的","细心的","耐心的","深沉的","朴素的","含蓄的","率直的","开放的","务实的","坚强的","自信的","谦虚的","文静的","深刻的","纯真的","朝气蓬勃的","慎重的","大方的","顽强的","迷人的","机智的","善解人意的","富有想象力的","有魅力的","独立的","好奇的","干净的","宽容的","尊重他人的","体贴的","守信的","有耐性的","有责任心的","有担当的","有远见的","有智慧的","有眼光的","有冒险精神的","有爱心的","有同情心的","喜欢思考的","喜欢学习的","具有批判性思维的","善于表达的","善于沟通的","善于合作的","善于领导的","有激情的","有幽默感的","有思想的","有个性的","有正义感的","有责任感的","有创造力的","有想象力的","有艺术细胞的","有团队精神的","有协调能力的","有决策能力的","有组织能力的","有学习能力的","有执行能力的","有分析能力的","有逻辑思维的","有创新能力的","有专业素养的","有商业头脑的"],vegetablesAndFruits=["萝卜","白菜","芹菜","生菜","青椒","辣椒","茄子","豆角","黄瓜","西红柿","洋葱","大蒜","土豆","南瓜","豆腐","韭菜","花菜","西兰花","蘑菇","金针菇","苹果","香蕉","橙子","柠檬","猕猴桃","草莓","葡萄","桃子","杏子","李子","石榴","西瓜","哈密瓜","蜜瓜","樱桃","蓝莓","柿子","橄榄","柚子","火龙果"];function checkOpen(){}function coverColor(){const e=document.getElementById("post-cover")?.src;if(e){const t=new XMLHttpRequest;t.open("GET",`${e}?imageAve`,!0),t.send(),t.onreadystatechange=function(){if(4===t.readyState&&200===t.status){let e=`#${JSON.parse(t.responseText).RGB.slice(2)}`;"light"===getContrastYIQ(e)&&(e=LightenDarkenColor(colorHex(e),-50)),updateCSSVariables(e),pty.initThemeColor(),document.getElementById("coverdiv").classList.add("loaded")}else t.onerror=function(){console.error("获取图像时出错.")}}}else updateCSSVariables("var(--LHL-theme)"),pty.initThemeColor()}function updateCSSVariables(e){const t=document.styleSheets[0];t.addRule(":root",`--LHL-main: ${e} !important`),t.addRule(":root",`--LHL-main-op: ${e}23 !important`),t.addRule(":root",`--LHL-main-op-deep: ${e}dd !important`),t.addRule(":root",`--LHL-main-none: ${e}00 !important`)}function colorHex(e){if(/^(rgb|RGB)/.test(e)){const t=e.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(",");let o="#";return t.forEach((e=>{let t=(+e).toString(16);1===t.length&&(t=`0${t}`),o+=t})),7===o.length?o:e}if(/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(e)){if(4===e.length){let t="#";for(let o=1;o<e.length;o++)t+=e[o]+e[o];return t}return e}return e}function colorRgb(e){if(/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(e)){if(4===e.length){let t="#";for(let o=1;o<e.length;o++)t+=e[o]+e[o];e=t}const t=[];for(let o=1;o<7;o+=2)t.push(parseInt(e.slice(o,o+2),16));return`rgb(${t.join(",")})`}return e}function LightenDarkenColor(e,t){let o=!1;"#"===e[0]&&(e=e.slice(1),o=!0);let n=parseInt(e,16),a=(n>>16)+t;a=a>255?255:a<0?0:a;let i=(n>>8&255)+t;i=i>255?255:i<0?0:i;let r=(255&n)+t;return r=r>255?255:r<0?0:r,(o?"#":"")+(16777216+65536*a+256*i+r).toString(16).slice(1)}function getContrastYIQ(e){const t=colorRgb(e).match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);return(299*t[1]+587*t[2]+114*t[3])/1e3>=128?"light":"dark"}function navTitle(){const e=document.title;document.getElementById("page-name-text").innerHTML=e.replace(" | 刘洪亮Leo的博客","")}function showcopy(){if(void 0!==GLOBAL_CONFIG.Snackbar)pty.snackbarShow(GLOBAL_CONFIG.copy.success);else{const e=ctx.previousElementSibling;e.innerText=GLOBAL_CONFIG.copy.success,e.style.opacity=1,setTimeout((()=>{e.style.opacity=0}),700)}}$(document).ready((function(){initBlog()})),document.addEventListener("pjax:send",(function(){clearTimeout(LHL_cookiesTime)})),document.addEventListener("pjax:complete",(function(){LHLGPTIsRunning=!1,LHL_aiPostExplanation="",aiTalkMode=!1,GPTModel="LHLGPT",initBlog()})),document.addEventListener("pjax:click",(function(){console.log("pjax:click")})),checkOpen.toString=function(){this.opened=!0},window.onload=function(){const e=document.getElementsByClassName("copybtn");for(let t=0;t<e.length;t++)e[t].addEventListener("click",showcopy);pty.initThemeColor()};const getTimeState=()=>{const e=(new Date).getHours();return e>=0&&e<=5?"早点儿休息哦！":e>5&&e<=10?"早上好，又是充实的一天！":e>10&&e<=14?"加油过好自己的生活！":e>14&&e<=18?"没什么可以阻挡你想做的事情！":e>18&&e<=24?"敬你一杯酒，愿你有诗有梦！":""},navFn={switchDarkMode:()=>{"light"===("dark"===document.documentElement.getAttribute("data-theme")?"dark":"light")?(activateDarkMode(),saveToLocal.set("theme","dark",2),void 0!==GLOBAL_CONFIG.Snackbar&&pty.snackbarShow(GLOBAL_CONFIG.Snackbar.day_to_night,!1,2e3)):(activateLightMode(),saveToLocal.set("theme","light",2),void 0!==GLOBAL_CONFIG.Snackbar&&pty.snackbarShow(GLOBAL_CONFIG.Snackbar.night_to_day,!1,2e3)),"function"==typeof utterancesTheme&&utterancesTheme(),"object"==typeof FB&&window.loadFBComment(),window.DISQUS&&document.getElementById("disqus_thread").children.length&&setTimeout((()=>window.disqusReset()),200),updateChartColors()}};function updateChartColors(){const e="light"===document.documentElement.getAttribute("data-theme")?"#363636":"#F7F7FA";["posts-chart","tags-chart","categories-chart"].forEach((t=>{if(document.getElementById(t)){const o=window[`${t.replace("-","")}Option`];o.textStyle.color=e,o.title.textStyle.color=e,o.xAxis.axisLine.lineStyle.color=e,o.yAxis.axisLine.lineStyle.color=e,window[`${t.replace("-","")}Chart`].setOption(o)}}))}function RemoveRewardMask(){$(".reward-main").hide(),$("#quit-box").hide()}function AddRewardMask(){$(".reward-main").css("display","flex"),$("#quit-box").css("display","flex")}function travelling(){const e=Array.from(flinksAll),t=e[Math.floor(Math.random()*e.length)];if(t){const{name:e,link:o}=t,n=`点击前往按钮进入随机一个友链，不保证跳转网站的安全性和可用性。本次随机到的是本站友链：「${e}」`;document.styleSheets[0].addRule(":root","--LHL-snackbar-time: 8000ms !important"),Snackbar.show({text:n,duration:8e3,pos:"top-center",actionText:"前往",onActionClick:function(e){$(e).css("opacity",0),window.open(o,"_blank")}})}}function toRandomFlink(){const e=Array.from(flinksAll);window.open(e[Math.floor(Math.random()*e.length)].link)}function removeLoading(){setTimeout((()=>{preloader.endLoading()}),3e3)}function addFriendLink(){const e=document.getElementsByClassName("el-textarea__inner")[0],t=document.createEvent("HTMLEvents");t.initEvent("input",!0,!0),e.value="昵称（请勿包含博客等字样）：\n网站地址（要求博客地址，请勿提交个人主页）：\n头像图片url（请提供尽可能清晰的图片，并且支持直接访问）：\n描述：\n",e.dispatchEvent(t),pty.scrollTo("post-comment"),e.focus(),e.setSelectionRange(-1,-1)}function getArrayItems(e,t){const o=[...e],n=[];for(let e=0;e<t&&o.length>0;e++){const e=Math.floor(Math.random()*o.length);n.push(o.splice(e,1)[0])}return n}function initObserver(){const e=document.getElementById("post-comment"),t=document.getElementById("pagination");e&&t&&new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting?(t.classList.add("show-window"),document.querySelector(".comment-barrage").style.bottom="-200px"):(t.classList.remove("show-window"),document.querySelector(".comment-barrage").style.bottom="0px")}))})).observe(e)}function percent(){const e=document.querySelector("#percent"),t=document.querySelector("#nav-totop"),o=document.getElementById("post-tools")||document.getElementById("footer"),n=document.querySelectorAll(".needEndHide");window.onscroll=()=>{const a=document.documentElement.scrollTop||window.pageYOffset,i=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight),r=document.documentElement.clientHeight,l=Math.round(a/(i-r)*100),c=window.scrollY+r;o.offsetTop+o.offsetHeight/2<c||l>90?(t.classList.add("long"),e.innerHTML="返回顶部"):(t.classList.remove("long"),l>=0&&(e.innerHTML=l));const s=i-a-r;n.forEach((e=>{e.classList.toggle("hide",s<100)}))}}function addKeyShotListener(){$(window).off("keydown").off("keyup").on("keydown",keyDownEvent).on("keyup",keyUpEvent)}function keyDownEvent(e){if(27===e.keyCode&&(pty.hideLoading(),pty.hideConsole(),rm.hideRightMenu()),LHL_keyboard&&e.shiftKey&&!LHL_intype)switch(e.keyCode){case 16:document.querySelector("#keyboard-tips").classList.add("show");break;case 75:return pty.keyboardToggle(),!1;case 65:return pty.showConsole(),!1;case 82:return toRandomPost(),!1;case 72:return pjax.loadUrl("/"),!1;case 68:return rm.switchDarkMode(),!1;case 76:return pjax.loadUrl("/link/"),!1;case 80:return pjax.loadUrl("/about/"),!1;case 84:return pjax.loadUrl("/stars/"),!1}}function keyUpEvent(e){16===e.keyCode&&document.querySelector("#keyboard-tips").classList.remove("show")}function open_all_tags(){document.querySelectorAll(".card-allinfo .card-tag-cloud").forEach((e=>{e.classList.add("all-tags")}));const e=document.getElementById("more-tags-btn");e&&e.parentNode.removeChild(e)}function listenToPageInputPress(){const e=document.getElementById("toPageText"),t=document.getElementById("toPageButton");e&&(e.addEventListener("keydown",(e=>{13===e.keyCode&&(pty.toPage(),pjax.loadUrl(t.href))})),e.addEventListener("input",(()=>{""===e.value||"0"===e.value?t.classList.remove("haveValue"):t.classList.add("haveValue");const o=document.querySelectorAll(".page-number"),n=+o[o.length-1].innerHTML;+e.value>n&&(e.value=n)})))}function initBlog(){window.commentBarrageInitialized=!1,coverColor(),addRightMenuClickEvent(),navTitle(),percent(),listenToPageInputPress(),pty.topPostScroll(),pty.sayhi(),pty.addTag(),pty.stopImgRightDrag(),pty.addFriendLinksInFooter(),pty.qrcodeCreate(),pty.privacyRead(),pty.onlyHome(),pty.addNavBackgroundInit(),pty.changeTimeFormate(),pty.darkModeStatus(),pty.categoriesBarActive(),pty.tagPageActive(),pty.removeBodyPaceClass(),pty.changeCanonical(),pty.lottieAnimation("footer_mini_logo"),pty.lottieAnimation("lottie_avatar"),LHLGPT.aiExplanation(),AIEngine(),addAIToggleListener(),pty.topGroup(),pty.hideLoading(),pty.hideTodayCard(),initObserver(),initializeCommentBarrage()}document.addEventListener("touchstart",(()=>{RemoveRewardMask()}),!1),$(document).unbind("keydown").bind("keydown",(e=>{if((e.ctrlKey||e.metaKey)&&67===e.keyCode&&""!==selectTextNow)return pty.snackbarShow("复制成功，复制和转载请标注本文地址"),rm.rightmenuCopyText(selectTextNow),!1})),document.addEventListener("scroll",pty.throttle((()=>{pty.initThemeColor()}),200)),navigator.serviceWorker.getRegistrations().then((e=>{e.forEach((e=>{e.unregister()}))})),window.onkeydown=function(e){123===e.keyCode&&pty.snackbarShow("开发者模式已打开，请遵循GPL协议",!1,3e3)},"true"===localStorage.getItem("keyboardToggle")?(document.querySelector("#consoleKeyboard").classList.add("on"),LHL_keyboard=!0):(document.querySelector("#consoleKeyboard").classList.remove("on"),LHL_keyboard=!1),addKeyShotListener(),$("input").focus((()=>{LHL_intype=!0})).focusout((()=>{LHL_intype=!1})),$("textarea").focus((()=>{LHL_intype=!0})).focusout((()=>{LHL_intype=!1})),window.onfocus=function(){document.querySelector("#keyboard-tips").classList.remove("show")},document.addEventListener("pjax:click",(function(){Pace.restart(),pty.showLoading(),$(window).prop("keydown",null).off("keydown")}));