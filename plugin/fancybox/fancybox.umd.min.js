!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).window=t.window||{})}(this,(function(t){"use strict";function e(t,e){var i,n=Object.keys(t);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(t),e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)),n}function i(t){for(var i=1;i<arguments.length;i++){var n=null!=arguments[i]?arguments[i]:{};i%2?e(Object(n),!0).forEach((function(e){var i,o;i=t,o=n[e],e in i?Object.defineProperty(i,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):i[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e,i){return e&&a(t.prototype,e),i&&a(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=l(t);if(i=e?(i=l(this).constructor,Reflect.construct(n,arguments,i)):n.apply(this,arguments),n=this,i&&("object"==typeof i||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");return h(n)}}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n)return(n=Object.getOwnPropertyDescriptor(n,e)).get?n.get.call(arguments.length<3?t:i):n.value}).apply(this,arguments)}function f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var n,o,a=[],s=!0,r=!1;try{for(i=i.call(t);!(s=(n=i.next()).done)&&(a.push(n.value),!e||a.length!==e);s=!0);}catch(t){r=!0,o=t}finally{try{s||null==i.return||i.return()}finally{if(r)throw o}}return a}}(t,e)||p(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t){return function(t){if(Array.isArray(t))return g(t)}(t)||function(){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}()||p(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){if(t){if("string"==typeof t)return g(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(i="Object"===i&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?g(t,e):void 0}}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function m(t,e){var i,n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=p(t))||e&&t&&"number"==typeof t.length)return n&&(t=n),i=0,{s:e=function(){},n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function y(){for(var t=!1,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];"boolean"==typeof i[0]&&(t=i.shift());var a=i[0];if(!a||"object"!==n(a))throw new Error("extendee must be an object");for(var s=i.slice(1),r=s.length,l=0;l<r;l++){var c,h,d,u=s[l];for(c in u)u.hasOwnProperty(c)&&(h=u[c],t&&(Array.isArray(h)||C(h))?(d=Array.isArray(h)?[]:{},a[c]=y(!0,a.hasOwnProperty(c)?a[c]:d,h)):a[c]=h)}return a}function b(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1e4;return t=parseFloat(t)||0,Math.round((t+Number.EPSILON)*e)/e}function x(t){return!!(t&&"object"===n(t)&&t instanceof Element&&t!==document.body)&&!t.__Panzoom&&(e=t,i=getComputedStyle(e)["overflow-y"],o=getComputedStyle(e)["overflow-x"],i=("scroll"===i||"auto"===i)&&1<Math.abs(e.scrollHeight-e.clientHeight),o=("scroll"===o||"auto"===o)&&1<Math.abs(e.scrollWidth-e.clientWidth),i||o?t:x(t.parentNode));var e,i,o}function w(t,e){return e?Math.sqrt(Math.pow(e.clientX-t.clientX,2)+Math.pow(e.clientY-t.clientY,2)):0}function k(t,e){return e?{clientX:(t.clientX+e.clientX)/2,clientY:(t.clientY+e.clientY)/2}:t}var S,C=function(t){return"object"===n(t)&&null!==t&&t.constructor===Object&&"[object Object]"===Object.prototype.toString.call(t)},$="undefined"!=typeof window&&window.ResizeObserver||(s(M,[{key:"observe",value:function(t){var e;this.observables.some((function(e){return e.el===t}))||(e={el:t,size:{height:t.clientHeight,width:t.clientWidth}},this.observables.push(e))}},{key:"unobserve",value:function(t){this.observables=this.observables.filter((function(e){return e.el!==t}))}},{key:"disconnect",value:function(){this.observables=[]}},{key:"check",value:function(){var t=this.observables.filter((function(t){var e=t.el.clientHeight,i=t.el.clientWidth;if(t.size.height!==e||t.size.width!==i)return t.size.height=e,t.size.width=i,!0})).map((function(t){return t.el}));0<t.length&&this.callback(t),window.requestAnimationFrame(this.boundCheck)}}]),M),E=s((function t(e){o(this,t),this.id=self.Touch&&e instanceof Touch?e.identifier:-1,this.pageX=e.pageX,this.pageY=e.pageY,this.clientX=e.clientX,this.clientY=e.clientY})),P=(s(z,[{key:"stop",value:function(){this._element.removeEventListener("mousedown",this._pointerStart,{passive:!1}),this._element.removeEventListener("touchstart",this._touchStart,{passive:!1}),this._element.removeEventListener("touchmove",this._move,{passive:!1}),this._element.removeEventListener("touchend",this._touchEnd),this._element.removeEventListener("touchcancel",this._touchEnd),window.removeEventListener("mousemove",this._move),window.removeEventListener("mouseup",this._pointerEnd)}},{key:"_triggerPointerStart",value:function(t,e){return!!this._startCallback(t,e)&&(this.currentPointers.push(t),this.startPointers.push(t),!0)}}]),z),T=(s(O,[{key:"option",value:function(t,e){var i;if(t=String(t),i=this.options,t=t.split(".").reduce((function(t,e){return t&&t[e]}),i),"function"==typeof t){for(var n=arguments.length,o=new Array(2<n?n-2:0),a=2;a<n;a++)o[a-2]=arguments[a];t=t.call.apply(t,[this,this].concat(o))}return void 0===t?e:t}},{key:"localize",value:function(t){var e=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return(t=String(t).replace(/\{\{(\w+).?(\w+)?\}\}/g,(function(t,n,o){var a="";o?a=e.option("".concat(n[0]+n.toLowerCase().substring(1),".l10n.").concat(o)):n&&(a=e.option("l10n.".concat(n))),a=a||t;for(var s=0;s<i.length;s++)a=a.split(i[s][0]).join(i[s][1]);return a}))).replace(/\{\{(.*)\}\}/,(function(t,e){return e}))}},{key:"on",value:function(t,e){var i=this;if(C(t)){for(var n=0,o=Object.entries(t);n<o.length;n++){var a=o[n];this.on.apply(this,v(a))}return this}return String(t).split(" ").forEach((function(t){-1==(t=i.events[t]=i.events[t]||[]).indexOf(e)&&t.push(e)})),this}},{key:"once",value:function(t,e){var i=this;if(C(t)){for(var n=0,o=Object.entries(t);n<o.length;n++){var a=o[n];this.once.apply(this,v(a))}return this}return String(t).split(" ").forEach((function(t){function n(){i.off(t,n);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];e.call.apply(e,[i,i].concat(a))}n._=e,i.on(t,n)})),this}},{key:"off",value:function(t,e){var i=this;if(!C(t))return t.split(" ").forEach((function(t){var n=i.events[t];if(!n||!n.length)return i;for(var o=-1,a=0,s=n.length;a<s;a++){var r=n[a];if(r&&(r===e||r._===e)){o=a;break}}-1!=o&&n.splice(o,1)})),this;for(var n=0,o=Object.entries(t);n<o.length;n++){var a=o[n];this.off.apply(this,v(a))}}},{key:"trigger",value:function(t){for(var e=arguments.length,i=new Array(1<e?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];var o,a=m(v(this.events[t]||[]).slice());try{for(a.s();!(o=a.n()).done;){var s=o.value;if(s&&!1===s.call.apply(s,[this,this].concat(i)))return!1}}catch(t){a.e(t)}finally{a.f()}var r,l=m(v(this.events["*"]||[]).slice());try{for(l.s();!(r=l.n()).done;){var c=r.value;if(c&&!1===c.call.apply(c,[this,t,this].concat(i)))return!1}}catch(t){l.e(t)}finally{l.f()}return!0}},{key:"attachPlugins",value:function(t){for(var e={},i=0,n=Object.entries(t||{});i<n.length;i++){var o=(a=f(n[i],2))[0],a=a[1];!1===this.options[o]||this.plugins[o]||(this.options[o]=y({},a.defaults||{},this.options[o]),e[o]=new a(this))}for(var s=0,r=Object.entries(e);s<r.length;s++){var l=f(r[s],2);l[0],l[1].attach(this)}return this.plugins=Object.assign({},this.plugins,e),this}},{key:"detachPlugins",value:function(){for(var t in this.plugins){var e=void 0;(e=this.plugins[t])&&"function"==typeof e.detach&&e.detach(this)}return this.plugins={},this}}]),O),L={touch:!0,zoom:!0,pinchToZoom:!0,panOnlyZoomed:!1,lockAxis:!1,friction:.64,decelFriction:.88,zoomFriction:.74,bounceForce:.2,baseScale:1,minScale:1,maxScale:2,step:.5,textSelection:!1,click:"toggleZoom",wheel:"zoom",wheelFactor:42,wheelLimit:5,draggableClass:"is-draggable",draggingClass:"is-dragging",ratio:1},_=(r(A,T),S=d(A),s(A,[{key:"initLayout",value:function(){var t=this.$container;if(!(t instanceof HTMLElement))throw new Error("Panzoom: Container not found");var e=this.option("content")||t.querySelector(".panzoom__content");if(!e)throw new Error("Panzoom: Content not found");this.$content=e;var i=this.option("viewport")||t.querySelector(".panzoom__viewport");i||!1===this.option("wrapInner")||((i=document.createElement("div")).classList.add("panzoom__viewport"),i.append.apply(i,v(t.childNodes)),t.appendChild(i)),this.$viewport=i||e.parentNode}},{key:"resetValues",value:function(){this.updateRate=this.option("updateRate",/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)?250:24),this.container={width:0,height:0},this.viewport={width:0,height:0},this.content={origWidth:0,origHeight:0,width:0,height:0,x:this.option("x",0),y:this.option("y",0),scale:this.option("baseScale")},this.transform={x:0,y:0,scale:1},this.resetDragPosition()}},{key:"onLoad",value:function(t){this.updateMetrics(),this.panTo({scale:this.option("baseScale"),friction:0}),this.trigger("load",t)}},{key:"onClick",value:function(t){if(!(t.defaultPrevented||document.activeElement&&document.activeElement.closest("[contenteditable]")))if(!this.option("textSelection")||!window.getSelection().toString().length||t.target&&t.target.hasAttribute("data-fancybox-close")){var e=this.$content.getClientRects()[0];if("ready"!==this.state&&(this.dragPosition.midPoint||1<Math.abs(e.top-this.dragStart.rect.top)||1<Math.abs(e.left-this.dragStart.rect.left)))return t.preventDefault(),void t.stopPropagation();!1!==this.trigger("click",t)&&this.option("zoom")&&"toggleZoom"===this.option("click")&&(t.preventDefault(),t.stopPropagation(),this.zoomWithClick(t))}else t.stopPropagation()}},{key:"onWheel",value:function(t){!1!==this.trigger("wheel",t)&&this.option("zoom")&&this.option("wheel")&&this.zoomWithWheel(t)}},{key:"zoomWithWheel",value:function(t){void 0===this.changedDelta&&(this.changedDelta=0);var e=Math.max(-1,Math.min(1,-t.deltaY||-t.deltaX||t.wheelDelta||-t.detail)),i=this.content.scale,n=i*(100+e*this.option("wheelFactor"))/100;n=e<0&&Math.abs(i-this.option("minScale"))<.01||0<e&&Math.abs(i-this.option("maxScale"))<.01?(this.changedDelta+=Math.abs(e),i):(this.changedDelta=0,Math.max(Math.min(n,this.option("maxScale")),this.option("minScale"))),this.changedDelta>this.option("wheelLimit")||(t.preventDefault(),n===i)||(e=this.$content.getBoundingClientRect(),i=t.clientX-e.left,t=t.clientY-e.top,this.zoomTo(n,{x:i,y:t}))}},{key:"zoomWithClick",value:function(t){var e=this.$content.getClientRects()[0],i=t.clientX-e.left;t=t.clientY-e.top,this.toggleZoom({x:i,y:t})}},{key:"attachEvents",value:function(){var t=this,e=(this.$content.addEventListener("load",this.onLoad),this.$container.addEventListener("wheel",this.onWheel,{passive:!1}),this.$container.addEventListener("click",this.onClick,{passive:!1}),this.initObserver(),new P(this.$container,{start:function(i,n){if(!t.option("touch"))return!1;if(t.velocity.scale<0)return!1;var o=n.composedPath()[0];if(!e.currentPointers.length){if(-1!==["BUTTON","TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].indexOf(o.nodeName))return!1;if(t.option("textSelection")&&function(t,e){for(var i=o.childNodes,n=document.createRange(),a=0;a<i.length;a++){var s=i[a];if(s.nodeType===Node.TEXT_NODE){n.selectNodeContents(s);var r=n.getBoundingClientRect();if(t>=r.left&&e>=r.top&&t<=r.right&&e<=r.bottom)return s}}}(i.clientX,i.clientY))return!1}return!x(o)&&!1!==t.trigger("touchStart",n)&&("mousedown"===n.type&&n.preventDefault(),t.state="pointerdown",t.resetDragPosition(),t.dragPosition.midPoint=null,t.dragPosition.time=Date.now(),!0)},move:function(i,n,o){if("pointerdown"===t.state)if(!1!==t.trigger("touchMove",o)){if(!(n.length<2&&!0===t.option("panOnlyZoomed")&&t.content.width<=t.viewport.width&&t.content.height<=t.viewport.height&&t.transform.scale<=t.option("baseScale"))&&(!(1<n.length)||t.option("zoom")&&!1!==t.option("pinchToZoom"))){var a=k(i[0],i[1]),s=k(n[0],n[1]),r=s.clientX-a.clientX,l=(a=s.clientY-a.clientY,i=w(i[0],i[1]),w(n[0],n[1]));if(l=i&&l?l/i:1,t.dragOffset.x+=r,t.dragOffset.y+=a,t.dragOffset.scale*=l,t.dragOffset.time=Date.now()-t.dragPosition.time,(i=1===t.dragStart.scale&&t.option("lockAxis"))&&!t.lockAxis){if(Math.abs(t.dragOffset.x)<6&&Math.abs(t.dragOffset.y)<6)return void o.preventDefault();r=Math.abs(180*Math.atan2(t.dragOffset.y,t.dragOffset.x)/Math.PI),t.lockAxis=45<r&&r<135?"y":"x"}"xy"!==i&&"y"===t.lockAxis||(o.preventDefault(),o.stopPropagation(),o.stopImmediatePropagation(),t.lockAxis&&(t.dragOffset["x"===t.lockAxis?"y":"x"]=0),t.$container.classList.add(t.option("draggingClass")),t.transform.scale===t.option("baseScale")&&"y"===t.lockAxis||(t.dragPosition.x=t.dragStart.x+t.dragOffset.x),t.transform.scale===t.option("baseScale")&&"x"===t.lockAxis||(t.dragPosition.y=t.dragStart.y+t.dragOffset.y),t.dragPosition.scale=t.dragStart.scale*t.dragOffset.scale,1<n.length?(l=(a=k(e.startPointers[0],e.startPointers[1])).clientX-t.dragStart.rect.x,r=a.clientY-t.dragStart.rect.y,n=(i=t.getZoomDelta(t.content.scale*t.dragOffset.scale,l,r)).deltaX,a=i.deltaY,t.dragPosition.x-=n,t.dragPosition.y-=a,t.dragPosition.midPoint=s):t.setDragResistance(),t.transform={x:t.dragPosition.x,y:t.dragPosition.y,scale:t.dragPosition.scale},t.startAnimation())}}else o.preventDefault()},end:function(n,o){var a;"pointerdown"===t.state&&(t._dragOffset=i({},t.dragOffset),e.currentPointers.length?t.resetDragPosition():(t.state="decel",t.friction=t.option("decelFriction"),t.recalculateTransform(),t.$container.classList.remove(t.option("draggingClass")),!1!==t.trigger("touchEnd",o)&&"decel"===t.state&&(o=t.option("minScale"),t.transform.scale<o?t.zoomTo(o,{friction:.64}):(o=t.option("maxScale"),.01<t.transform.scale-o&&(n=t.dragPosition.midPoint||n,a=t.$content.getClientRects()[0],t.zoomTo(o,{friction:.64,x:n.clientX-a.left,y:n.clientY-a.top}))))))}}));this.pointerTracker=e}},{key:"initObserver",value:function(){var t=this;this.resizeObserver||(this.resizeObserver=new $((function(){t.updateTimer||(t.updateTimer=setTimeout((function(){var e=t.$container.getBoundingClientRect();e.width&&e.height&&(1<Math.abs(e.width-t.container.width)||1<Math.abs(e.height-t.container.height))&&(t.isAnimating()&&t.endAnimation(!0),t.updateMetrics(),t.panTo({x:t.content.x,y:t.content.y,scale:t.option("baseScale"),friction:0})),t.updateTimer=null}),t.updateRate))})),this.resizeObserver.observe(this.$container))}},{key:"resetDragPosition",value:function(){this.lockAxis=null,this.friction=this.option("friction"),this.velocity={x:0,y:0,scale:0};var t=(n=this.content).x,e=n.y,n=n.scale;this.dragStart={rect:this.$content.getBoundingClientRect(),x:t,y:e,scale:n},this.dragPosition=i(i({},this.dragPosition),{},{x:t,y:e,scale:n}),this.dragOffset={x:0,y:0,scale:1,time:0}}},{key:"updateMetrics",value:function(t){!0!==t&&this.trigger("beforeUpdate");var e,n=this.$container,o=this.$content,a=this.$viewport,s=o instanceof HTMLImageElement,r=this.option("zoom"),l=this.option("resizeParent",r),c=this.option("width"),h=this.option("height"),d=c||(d=o,Math.max(parseFloat(d.naturalWidth||0),parseFloat(d.width&&d.width.baseVal&&d.width.baseVal.value||0),parseFloat(d.offsetWidth||0),parseFloat(d.scrollWidth||0))),u=h||(u=o,Math.max(parseFloat(u.naturalHeight||0),parseFloat(u.height&&u.height.baseVal&&u.height.baseVal.value||0),parseFloat(u.offsetHeight||0),parseFloat(u.scrollHeight||0))),f=(c=d=b(d*(Object.assign(o.style,{width:c?"".concat(c,"px"):"",height:h?"".concat(h,"px"):"",maxWidth:"",maxHeight:""}),l&&Object.assign(a.style,{width:"",height:""}),f=this.option("ratio"))),h=u=b(u*f),o.getBoundingClientRect()),v=a.getBoundingClientRect(),p=(n=a==n?v:n.getBoundingClientRect(),Math.max(a.offsetWidth,b(v.width))),g=(v=Math.max(a.offsetHeight,b(v.height)),window.getComputedStyle(a));p-=parseFloat(g.paddingLeft)+parseFloat(g.paddingRight),v-=parseFloat(g.paddingTop)+parseFloat(g.paddingBottom),this.viewport.width=p,this.viewport.height=v,r&&((.1<Math.abs(d-f.width)||.1<Math.abs(u-f.height))&&(g=function(t,e,i,n){return{width:t*(i=Math.min(i/t||0,n/e))||0,height:e*i||0}}(d,u,Math.min(d,f.width),Math.min(u,f.height)),c=b(g.width),h=b(g.height)),Object.assign(o.style,{width:"".concat(c,"px"),height:"".concat(h,"px"),transform:""})),l&&(Object.assign(a.style,{width:"".concat(c,"px"),height:"".concat(h,"px")}),this.viewport=i(i({},this.viewport),{},{width:c,height:h})),s&&r&&"function"!=typeof this.options.maxScale&&(e=this.option("maxScale"),this.options.maxScale=function(){return 0<this.content.origWidth&&0<this.content.fitWidth?this.content.origWidth/this.content.fitWidth:e}),this.content=i(i({},this.content),{},{origWidth:d,origHeight:u,fitWidth:c,fitHeight:h,width:c,height:h,scale:1,isZoomable:r}),this.container={width:n.width,height:n.height},!0!==t&&this.trigger("afterUpdate")}},{key:"zoomIn",value:function(t){this.zoomTo(this.content.scale+(t||this.option("step")))}},{key:"zoomOut",value:function(t){this.zoomTo(this.content.scale-(t||this.option("step")))}},{key:"toggleZoom",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=this.option("maxScale"),i=this.option("baseScale");i=this.content.scale>i+.5*(e-i)?i:e,this.zoomTo(i,t)}},{key:"zoomTo",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.option("baseScale"),e=void 0===(e=(i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).x)?null:e,i=void 0===(i=i.y)?null:i,n=(t=Math.max(Math.min(t,this.option("maxScale")),this.option("minScale")),b(this.content.scale/(this.content.width/this.content.fitWidth),1e7)),o=(null===e&&(e=this.content.width*n*.5),null===i&&(i=this.content.height*n*.5),n=this.getZoomDelta(t,e,i)).deltaX;n=n.deltaY,e=this.content.x-o,i=this.content.y-n,this.panTo({x:e,y:i,scale:t,friction:this.option("zoomFriction")})}},{key:"getZoomDelta",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=this.content.fitWidth*this.content.scale,o=this.content.fitHeight*this.content.scale;return{deltaX:(this.content.fitWidth*t-n)*(0<e&&n?e/n:0),deltaY:(this.content.fitHeight*t-o)*(0<i&&o?i/o:0)}}},{key:"panTo",value:function(){var t,e=void 0===(e=(s=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).x)?this.content.x:e,n=void 0===(n=s.y)?this.content.y:n,o=s.scale,a=void 0===(a=s.friction)?this.option("friction"):a,s=s.ignoreBounds;o=o||this.content.scale||1,void 0!==s&&s||(t=(s=this.getBounds(o)).boundX,s=s.boundY,t&&(e=Math.max(Math.min(e,t.to),t.from)),s&&(n=Math.max(Math.min(n,s.to),s.from))),this.friction=a,this.transform=i(i({},this.transform),{},{x:e,y:n,scale:o}),a?(this.state="panning",this.velocity={x:(1/this.friction-1)*(e-this.content.x),y:(1/this.friction-1)*(n-this.content.y),scale:(1/this.friction-1)*(o-this.content.scale)},this.startAnimation()):this.endAnimation()}},{key:"startAnimation",value:function(){var t=this;this.rAF?cancelAnimationFrame(this.rAF):this.trigger("startAnimation"),this.rAF=requestAnimationFrame((function(){return t.animate()}))}},{key:"animate",value:function(){var t=this;if(this.setEdgeForce(),this.setDragForce(),this.velocity.x*=this.friction,this.velocity.y*=this.friction,this.velocity.scale*=this.friction,this.content.x+=this.velocity.x,this.content.y+=this.velocity.y,this.content.scale+=this.velocity.scale,this.isAnimating())this.setTransform();else if("pointerdown"!==this.state)return void this.endAnimation();this.rAF=requestAnimationFrame((function(){return t.animate()}))}},{key:"getBounds",value:function(t){var e=this.boundX,i=this.boundY;if(void 0!==e&&void 0!==i)return{boundX:e,boundY:i};e={from:0,to:0},i={from:0,to:0},t=t||this.transform.scale;var n,o=this.content.fitWidth*t,a=(t=this.content.fitHeight*t,this.viewport.width),s=this.viewport.height;return o<a?(n=b(.5*(a-o)),e.from=n,e.to=n):e.from=b(a-o),t<s?(i.from=n=.5*(s-t),i.to=n):i.from=b(s-t),{boundX:e,boundY:i}}},{key:"setEdgeForce",value:function(){var t,e,i,n,o,a,s;"decel"===this.state&&(i=this.option("bounceForce"),s=(n=this.getBounds(Math.max(this.transform.scale,this.content.scale))).boundX,n=n.boundY,s&&(a=this.content.x<s.from,o=this.content.x>s.to),n&&(t=this.content.y<n.from,e=this.content.y>n.to),(a||o)&&(o=((a?s.from:s.to)-this.content.x)*i,(a=this.content.x+(this.velocity.x+o)/this.friction)>=s.from&&a<=s.to&&(o+=this.velocity.x),this.velocity.x=o,this.recalculateTransform()),(t||e)&&(a=((t?n.from:n.to)-this.content.y)*i,(s=this.content.y+(a+this.velocity.y)/this.friction)>=n.from&&s<=n.to&&(a+=this.velocity.y),this.velocity.y=a,this.recalculateTransform()))}},{key:"setDragResistance",value:function(){var t,e,i,n,o,a;"pointerdown"===this.state&&(o=(i=this.getBounds(this.dragPosition.scale)).boundX,i=i.boundY,o&&(n=this.dragPosition.x<o.from,a=this.dragPosition.x>o.to),i&&(t=this.dragPosition.y<i.from,e=this.dragPosition.y>i.to),!n&&!a||n&&a||(n=(a=n?o.from:o.to)-this.dragPosition.x,this.dragPosition.x=a-.3*n),!t&&!e||t&&e||(a=(o=t?i.from:i.to)-this.dragPosition.y,this.dragPosition.y=o-.3*a))}},{key:"setDragForce",value:function(){"pointerdown"===this.state&&(this.velocity.x=this.dragPosition.x-this.content.x,this.velocity.y=this.dragPosition.y-this.content.y,this.velocity.scale=this.dragPosition.scale-this.content.scale)}},{key:"recalculateTransform",value:function(){this.transform.x=this.content.x+this.velocity.x/(1/this.friction-1),this.transform.y=this.content.y+this.velocity.y/(1/this.friction-1),this.transform.scale=this.content.scale+this.velocity.scale/(1/this.friction-1)}},{key:"isAnimating",value:function(){return!(!this.friction||!(.05<Math.abs(this.velocity.x)||.05<Math.abs(this.velocity.y)||.05<Math.abs(this.velocity.scale)))}},{key:"setTransform",value:function(t){var e,n,o,a;t?(e=b(this.transform.x),n=b(this.transform.y),o=this.transform.scale,this.content=i(i({},this.content),{},{x:e,y:n,scale:o})):(e=b(this.content.x),n=b(this.content.y),o=this.content.scale/(this.content.width/this.content.fitWidth),this.content=i(i({},this.content),{},{x:e,y:n})),this.trigger("beforeTransform"),e=b(this.content.x),n=b(this.content.y),t&&this.option("zoom")?(t=b(this.content.fitWidth*o),a=b(this.content.fitHeight*o),this.content.width=t,this.content.height=a,this.transform=i(i({},this.transform),{},{width:t,height:a,scale:o}),Object.assign(this.$content.style,{width:"".concat(t,"px"),height:"".concat(a,"px"),maxWidth:"none",maxHeight:"none",transform:"translate3d(".concat(e,"px, ").concat(n,"px, 0) scale(1)")})):this.$content.style.transform="translate3d(".concat(e,"px, ").concat(n,"px, 0) scale(").concat(o,")"),this.trigger("afterTransform")}},{key:"endAnimation",value:function(t){cancelAnimationFrame(this.rAF),this.rAF=null,this.velocity={x:0,y:0,scale:0},this.setTransform(!0),this.state="ready",this.handleCursor(),!0!==t&&this.trigger("endAnimation")}},{key:"handleCursor",value:function(){var t=this.option("draggableClass");t&&this.option("touch")&&(1==this.option("panOnlyZoomed")&&this.content.width<=this.viewport.width&&this.content.height<=this.viewport.height&&this.transform.scale<=this.option("baseScale")?this.$container.classList.remove(t):this.$container.classList.add(t))}},{key:"detachEvents",value:function(){this.$content.removeEventListener("load",this.onLoad),this.$container.removeEventListener("wheel",this.onWheel,{passive:!1}),this.$container.removeEventListener("click",this.onClick,{passive:!1}),this.pointerTracker&&(this.pointerTracker.stop(),this.pointerTracker=null),this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null)}},{key:"destroy",value:function(){"destroy"!==this.state&&(this.state="destroy",clearTimeout(this.updateTimer),this.updateTimer=null,cancelAnimationFrame(this.rAF),this.rAF=null,this.detachEvents(),this.detachPlugins(),this.resetDragPosition())}}]),A);function A(t){var e,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};o(this,A),(e=S.call(this,y(!0,{},L,i))).state="init",e.$container=t;for(var n=0,a=["onLoad","onWheel","onClick"];n<a.length;n++){var s=a[n];e[s]=e[s].bind(h(e))}return e.initLayout(),e.resetValues(),e.attachPlugins(A.Plugins),e.trigger("init"),e.updateMetrics(),e.attachEvents(),e.trigger("ready"),!1===e.option("centerOnStart")?e.state="ready":e.panTo({friction:0}),t.__Panzoom=h(e),e}function O(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};o(this,O),this.options=y(!0,{},t),this.plugins=[],this.events={};for(var e=0,i=["on","once"];e<i.length;e++)for(var n=i[e],a=0,s=Object.entries(this.options[n]||{});a<s.length;a++){var r=s[a];this[n].apply(this,v(r))}}function z(t){var e=this,i=void 0===(i=(a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).start)?function(){return!0}:i,n=void 0===(n=a.move)?function(){}:n,a=void 0===(a=a.end)?function(){}:a;o(this,z),this._element=t,this.startPointers=[],this.currentPointers=[],this._pointerStart=function(t){var i;0<t.buttons&&0!==t.button||(i=new E(t),e.currentPointers.some((function(t){return t.id===i.id}))||e._triggerPointerStart(i,t)&&(window.addEventListener("mousemove",e._move),window.addEventListener("mouseup",e._pointerEnd)))},this._touchStart=function(t){for(var i=0,n=Array.from(t.changedTouches||[]);i<n.length;i++){var o=n[i];e._triggerPointerStart(new E(o),t)}},this._move=function(t){var i,n=e.currentPointers.slice(),o="changedTouches"in t?Array.from(t.changedTouches).map((function(t){return new E(t)})):[new E(t)],a=[],s=m(o);try{for(s.s();!(i=s.n()).done;)!function(){var t=i.value,n=e.currentPointers.findIndex((function(e){return e.id===t.id}));n<0||(a.push(t),e.currentPointers[n]=t)}()}catch(t){s.e(t)}finally{s.f()}e._moveCallback(n,e.currentPointers.slice(),t)},this._triggerPointerEnd=function(t,i){var n=e.currentPointers.findIndex((function(e){return e.id===t.id}));return!(n<0||(e.currentPointers.splice(n,1),e.startPointers.splice(n,1),e._endCallback(t,i),0))},this._pointerEnd=function(t){0<t.buttons&&0!==t.button||e._triggerPointerEnd(new E(t),t)&&(window.removeEventListener("mousemove",e._move,{passive:!1}),window.removeEventListener("mouseup",e._pointerEnd,{passive:!1}))},this._touchEnd=function(t){for(var i=0,n=Array.from(t.changedTouches||[]);i<n.length;i++){var o=n[i];e._triggerPointerEnd(new E(o),t)}},this._startCallback=i,this._moveCallback=n,this._endCallback=a,this._element.addEventListener("mousedown",this._pointerStart,{passive:!1}),this._element.addEventListener("touchstart",this._touchStart,{passive:!1}),this._element.addEventListener("touchmove",this._move,{passive:!1}),this._element.addEventListener("touchend",this._touchEnd),this._element.addEventListener("touchcancel",this._touchEnd)}function M(t){o(this,M),this.observables=[],this.boundCheck=this.check.bind(this),this.boundCheck(),this.callback=t}function I(t,e){var i=0;return function(){var n=(new Date).getTime();if(!(n-i<e))return i=n,t.apply(void 0,arguments)}}function R(t){o(this,R),this.$container=null,this.$prev=null,this.$next=null,this.carousel=t,this.onRefresh=this.onRefresh.bind(this)}_.version="4.0.31",_.Plugins={},s(R,[{key:"option",value:function(t){return this.carousel.option("Navigation.".concat(t))}},{key:"createButton",value:function(t){var e,i=this,n=document.createElement("button"),o=(n.setAttribute("title",this.carousel.localize("{{".concat(t.toUpperCase(),"}}"))),this.option("classNames.button")+" "+this.option("classNames.".concat(t)));return(e=n.classList).add.apply(e,v(o.split(" "))),n.setAttribute("tabindex","0"),n.innerHTML=this.carousel.localize(this.option("".concat(t,"Tpl"))),n.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),i.carousel["slide".concat("next"===t?"Next":"Prev")]()})),n}},{key:"build",value:function(){var t;this.$container||(this.$container=document.createElement("div"),(t=this.$container.classList).add.apply(t,v(this.option("classNames.main").split(" "))),this.carousel.$container.appendChild(this.$container)),this.$next||(this.$next=this.createButton("next"),this.$container.appendChild(this.$next)),this.$prev||(this.$prev=this.createButton("prev"),this.$container.appendChild(this.$prev))}},{key:"onRefresh",value:function(){var t=this.carousel.pages.length;t<=1||1<t&&this.carousel.elemDimWidth<this.carousel.wrapDimWidth&&!Number.isInteger(this.carousel.option("slidesPerPage"))?this.cleanup():(this.build(),this.$prev.removeAttribute("disabled"),this.$next.removeAttribute("disabled"),this.carousel.option("infiniteX",this.carousel.option("infinite"))||(this.carousel.page<=0&&this.$prev.setAttribute("disabled",""),this.carousel.page>=t-1&&this.$next.setAttribute("disabled","")))}},{key:"cleanup",value:function(){this.$prev&&this.$prev.remove(),this.$prev=null,this.$next&&this.$next.remove(),this.$next=null,this.$container&&this.$container.remove(),this.$container=null}},{key:"attach",value:function(){this.carousel.on("refresh change",this.onRefresh)}},{key:"detach",value:function(){this.carousel.off("refresh change",this.onRefresh),this.cleanup()}}]),(W=R).defaults={prevTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M15 3l-9 9 9 9"/></svg>',nextTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M9 3l9 9-9 9"/></svg>',classNames:{main:"carousel__nav",button:"carousel__button",next:"is-next",prev:"is-prev"}},s(B,[{key:"buildList",value:function(){var t,e=this;if(!(this.carousel.pages.length<this.carousel.option("Dots.minSlideCount")))return(t=document.createElement("ol")).classList.add("carousel__dots"),t.addEventListener("click",(function(t){var i;"page"in t.target.dataset&&(t.preventDefault(),t.stopPropagation(),(t=parseInt(t.target.dataset.page,10))!==(i=e.carousel).page&&(i.pages.length<3&&i.option("infinite")?i[0==t?"slidePrev":"slideNext"]():i.slideTo(t)))})),this.$list=t,this.carousel.$container.appendChild(t),this.carousel.$container.classList.add("has-dots"),t}},{key:"removeList",value:function(){this.$list&&(this.$list.parentNode.removeChild(this.$list),this.$list=null),this.carousel.$container.classList.remove("has-dots")}},{key:"rebuildDots",value:function(){var t=this,e=!!this.$list,i=this.carousel.pages.length;if(i<2)e&&this.removeList();else{e||this.buildList();var n=this.$list.children.length;if(i<n)for(var o=i;o<n;o++)this.$list.removeChild(this.$list.lastChild);else{for(var a=n;a<i;a++)!function(e){var i=document.createElement("li");i.classList.add("carousel__dot"),i.dataset.page=e,i.setAttribute("role","button"),i.setAttribute("tabindex","0"),i.setAttribute("title",t.carousel.localize("{{GOTO}}",[["%d",e+1]])),i.addEventListener("keydown",(function(t){var e;"Enter"===(t=t.code)||"NumpadEnter"===t?e=i:"ArrowRight"===t?e=i.nextSibling:"ArrowLeft"===t&&(e=i.previousSibling),e&&e.click()})),t.$list.appendChild(i)}(a);this.setActiveDot()}}}},{key:"setActiveDot",value:function(){var t;this.$list&&(this.$list.childNodes.forEach((function(t){t.classList.remove("is-selected")})),(t=this.$list.childNodes[this.carousel.page])&&t.classList.add("is-selected"))}},{key:"onChange",value:function(){this.setActiveDot()}},{key:"onRefresh",value:function(){this.rebuildDots()}},{key:"attach",value:function(){this.carousel.on(this.events)}},{key:"detach",value:function(){this.removeList(),this.carousel.off(this.events),this.carousel=null}}]);var F=B,N=(s(D,[{key:"addAsTargetFor",value:function(t){this.target=this.carousel,this.nav=t,this.attachEvents()}},{key:"addAsNavFor",value:function(t){this.target=t,this.nav=this.carousel,this.attachEvents()}},{key:"attachEvents",value:function(){this.nav.options.initialSlide=this.target.options.initialPage,this.nav.on("ready",this.onNavReady),this.nav.on("createSlide",this.onNavCreateSlide),this.nav.on("Panzoom.click",this.onNavClick),this.target.on("change",this.onTargetChange),this.target.on("Panzoom.afterUpdate",this.onTargetChange)}},{key:"onNavReady",value:function(){this.onTargetChange(!0)}},{key:"onNavClick",value:function(t,e,i){var n=i.target.closest(".carousel__slide");n&&(i.stopPropagation(),i=parseInt(n.dataset.index,10),n=this.target.findPageForSlide(i),this.target.page!==n&&this.target.slideTo(n,{friction:this.friction}),this.markSelectedSlide(i))}},{key:"onNavCreateSlide",value:function(t,e){e.index===this.selectedIndex&&this.markSelectedSlide(e.index)}},{key:"onTargetChange",value:function(){var t=this.target.pages[this.target.page].indexes[0],e=this.nav.findPageForSlide(t);this.nav.slideTo(e),this.markSelectedSlide(t)}},{key:"markSelectedSlide",value:function(t){this.selectedIndex=t,v(this.nav.slides).filter((function(t){return t.$el&&t.$el.classList.remove("is-nav-selected")})),(t=this.nav.slides[t])&&t.$el&&t.$el.classList.add("is-nav-selected")}},{key:"attach",value:function(t){((t=t.options.Sync).target||t.nav)&&(t.target?this.addAsNavFor(t.target):t.nav&&this.addAsTargetFor(t.nav),this.friction=t.friction)}},{key:"detach",value:function(){this.nav&&(this.nav.off("ready",this.onNavReady),this.nav.off("Panzoom.click",this.onNavClick),this.nav.off("createSlide",this.onNavCreateSlide)),this.target&&(this.target.off("Panzoom.afterUpdate",this.onTargetChange),this.target.off("change",this.onTargetChange))}}]),D);function D(t){o(this,D),this.carousel=t,this.selectedIndex=null,this.friction=0,this.onNavReady=this.onNavReady.bind(this),this.onNavClick=this.onNavClick.bind(this),this.onNavCreateSlide=this.onNavCreateSlide.bind(this),this.onTargetChange=this.onTargetChange.bind(this)}function B(t){o(this,B),this.carousel=t,this.$list=null,this.events={change:this.onChange.bind(this),refresh:this.onRefresh.bind(this)}}N.defaults={friction:.92};var H,W={Navigation:W,Dots:F,Sync:N},j={slides:[],preload:0,slidesPerPage:"auto",initialPage:null,initialSlide:null,friction:.92,center:!0,infinite:!0,fill:!0,dragFree:!1,prefix:"",classNames:{viewport:"carousel__viewport",track:"carousel__track",slide:"carousel__slide",slideSelected:"is-selected"},l10n:{NEXT:"Next slide",PREV:"Previous slide",GOTO:"Go to slide #%d"}},X=(r(q,T),H=d(q),s(q,[{key:"init",value:function(){this.pages=[],this.page=this.pageIndex=null,this.prevPage=this.prevPageIndex=null,this.attachPlugins(q.Plugins),this.trigger("init"),this.initLayout(),this.initSlides(),this.updateMetrics(),this.$track&&this.pages.length&&(this.$track.style.transform="translate3d(".concat(-1*this.pages[this.page].left,"px, 0px, 0) scale(1)")),this.manageSlideVisiblity(),this.initPanzoom(),this.state="ready",this.trigger("ready")}},{key:"initLayout",value:function(){var t,e=this.option("prefix"),i=this.option("classNames");this.$viewport=this.option("viewport")||this.$container.querySelector(".".concat(e).concat(i.viewport)),this.$viewport||(this.$viewport=document.createElement("div"),(t=this.$viewport.classList).add.apply(t,v((e+i.viewport).split(" "))),(t=this.$viewport).append.apply(t,v(this.$container.childNodes)),this.$container.appendChild(this.$viewport)),this.$track=this.option("track")||this.$container.querySelector(".".concat(e).concat(i.track)),this.$track||(this.$track=document.createElement("div"),(t=this.$track.classList).add.apply(t,v((e+i.track).split(" "))),(t=this.$track).append.apply(t,v(this.$viewport.childNodes)),this.$viewport.appendChild(this.$track))}},{key:"initSlides",value:function(){var t=this;this.slides=[],this.$viewport.querySelectorAll(".".concat(this.option("prefix")).concat(this.option("classNames.slide"))).forEach((function(e){e={$el:e,isDom:!0},t.slides.push(e),t.trigger("createSlide",e,t.slides.length)})),Array.isArray(this.options.slides)&&(this.slides=y(!0,v(this.slides),this.options.slides))}},{key:"updateMetrics",value:function(){var t,e=this,n=0,o=[],a=(this.slides.forEach((function(i,a){var s=i.$el;s=i.isDom||!t?e.getSlideMetrics(s):t,i.index=a,i.width=s,i.left=n,n+=t=s,o.push(a)})),Math.max(this.$track.offsetWidth,b(this.$track.getBoundingClientRect().width))),s=getComputedStyle(this.$track),r=(a-=parseFloat(s.paddingLeft)+parseFloat(s.paddingRight),this.contentWidth=n,this.viewportWidth=a,[]),l=this.option("slidesPerPage");if(Number.isInteger(l)&&a<n)for(var c=0;c<this.slides.length;c+=l)r.push({indexes:o.slice(c,c+l),slides:this.slides.slice(c,c+l)});else for(var h=0,d=0,u=0;u<this.slides.length;u+=1){var f=this.slides[u];(!r.length||d+f.width>a)&&(r.push({indexes:[],slides:[]}),h=r.length-1,d=0),d+=f.width,r[h].indexes.push(u),r[h].slides.push(f)}var p=this.option("center"),g=this.option("fill");r.forEach((function(t,i){t.index=i,t.width=t.slides.reduce((function(t,e){return t+e.width}),0),t.left=t.slides[0].left,p&&(t.left+=.5*(a-t.width)*-1),g&&!e.option("infiniteX",e.option("infinite"))&&a<n&&(t.left=Math.max(t.left,0),t.left=Math.min(t.left,n-a))}));var m,y,x=[];null===(r.forEach((function(t){t=i({},t),m&&t.left===m.left?(m.width+=t.width,m.slides=[].concat(v(m.slides),v(t.slides)),m.indexes=[].concat(v(m.indexes),v(t.indexes))):(t.index=x.length,m=t,x.push(t))})),this.pages=x,s=this.page)&&(s=null!==(y=this.option("initialSlide"))?this.findPageForSlide(y):parseInt(this.option("initialPage",0),10)||0,x[s]||(s=x.length&&s>x.length?x[x.length-1].index:0),this.page=s,this.pageIndex=s),this.updatePanzoom(),this.trigger("refresh")}},{key:"getSlideMetrics",value:function(t){t||(i=this.slides[0],(t=document.createElement("div")).dataset.isTestEl=1,t.style.visibility="hidden",(e=t.classList).add.apply(e,v((this.option("prefix")+this.option("classNames.slide")).split(" "))),i.customClass&&(e=t.classList).add.apply(e,v(i.customClass.split(" "))),this.$track.prepend(t));var e=Math.max(t.offsetWidth,b(t.getBoundingClientRect().width)),i=t.currentStyle||window.getComputedStyle(t);return e=e+(parseFloat(i.marginLeft)||0)+(parseFloat(i.marginRight)||0),t.dataset.isTestEl&&t.remove(),e}},{key:"findPageForSlide",value:function(t){t=parseInt(t,10)||0;var e=this.pages.find((function(e){return-1<e.indexes.indexOf(t)}));return e?e.index:null}},{key:"slideNext",value:function(){this.slideTo(this.pageIndex+1)}},{key:"slidePrev",value:function(){this.slideTo(this.pageIndex-1)}},{key:"slideTo",value:function(t){t=void 0===(e=(i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).x)?-1*this.setPage(t,!0):e;var e=void 0===(e=i.y)?0:e,i=void 0===(i=i.friction)?this.option("friction"):i;this.Panzoom.content.x===t&&!this.Panzoom.velocity.x&&i||(this.Panzoom.panTo({x:t,y:e,friction:i,ignoreBounds:!0}),"ready"===this.state&&"ready"===this.Panzoom.state&&this.trigger("settle"))}},{key:"initPanzoom",value:function(){var t=this,e=(this.Panzoom&&this.Panzoom.destroy(),y(!0,{},{content:this.$track,wrapInner:!1,resizeParent:!1,zoom:!1,click:!1,lockAxis:"x",x:this.pages.length?-1*this.pages[this.page].left:0,centerOnStart:!1,textSelection:function(){return t.option("textSelection",!1)},panOnlyZoomed:function(){return this.content.width<=this.viewport.width}},this.option("Panzoom")));this.Panzoom=new _(this.$container,e),this.Panzoom.on({"*":function(e){for(var i=arguments.length,n=new Array(1<i?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];return t.trigger.apply(t,["Panzoom.".concat(e)].concat(n))},afterUpdate:function(){t.updatePage()},beforeTransform:this.onBeforeTransform.bind(this),touchEnd:this.onTouchEnd.bind(this),endAnimation:function(){t.trigger("settle")}}),this.updateMetrics(),this.manageSlideVisiblity()}},{key:"updatePanzoom",value:function(){this.Panzoom&&(this.Panzoom.content=i(i({},this.Panzoom.content),{},{fitWidth:this.contentWidth,origWidth:this.contentWidth,width:this.contentWidth}),1<this.pages.length&&this.option("infiniteX",this.option("infinite"))?this.Panzoom.boundX=null:this.pages.length&&(this.Panzoom.boundX={from:-1*this.pages[this.pages.length-1].left,to:-1*this.pages[0].left}),this.option("infiniteY",this.option("infinite"))?this.Panzoom.boundY=null:this.Panzoom.boundY={from:0,to:0},this.Panzoom.handleCursor())}},{key:"manageSlideVisiblity",value:function(){var t=this,e=this.contentWidth,i=this.viewportWidth,n=this.Panzoom?-1*this.Panzoom.content.x:this.pages.length?this.pages[this.page].left:0,o=this.option("preload"),a=this.option("infiniteX",this.option("infinite")),s=parseFloat(getComputedStyle(this.$viewport,null).getPropertyValue("padding-left")),r=parseFloat(getComputedStyle(this.$viewport,null).getPropertyValue("padding-right")),l=(this.slides.forEach((function(l){var c=0,h=n-s,d=n+i+r,u=(d+=o*(i+s+r),l.left+l.width>(h-=o*(i+s+r))&&l.left<d),f=(h=n+e-s,d=n+e+i+r,h-=o*(i+s+r),a&&l.left+l.width>h&&l.left<d);h=n-e-s,d=n-e+i+r,h-=o*(i+s+r),h=a&&l.left+l.width>h&&l.left<d,f||u||h?(t.createSlideEl(l),u&&(c=0),f&&(c=-1),h&&(c=1),l.left+l.width>n&&l.left<=n+i+r&&(c=0)):t.removeSlideEl(l),l.hasDiff=c})),0),c=0;this.slides.forEach((function(t,i){var n=0;t.$el?(i!==l||t.hasDiff?n=c+t.hasDiff*e:c=0,t.$el.style.left=.1<Math.abs(n)?"".concat(c+t.hasDiff*e,"px"):"",l++):c+=t.width})),this.markSelectedSlides()}},{key:"createSlideEl",value:function(t){var e,i,n;if(t){if(!t.$el)return(e=document.createElement("div")).dataset.index=t.index,(o=e.classList).add.apply(o,v((this.option("prefix")+this.option("classNames.slide")).split(" "))),t.customClass&&(o=e.classList).add.apply(o,v(t.customClass.split(" "))),t.html&&(e.innerHTML=t.html),i=[],this.slides.forEach((function(t,e){t.$el&&i.push(e)})),n=t.index,o=null,i.length&&(a=i.reduce((function(t,e){return Math.abs(e-n)<Math.abs(t-n)?e:t})),o=this.slides[a]),this.$track.insertBefore(e,o&&o.$el?o.index<t.index?o.$el.nextSibling:o.$el:null),t.$el=e,this.trigger("createSlide",t,n),t;var o,a=t.$el.dataset.index;a&&parseInt(a,10)===t.index||(t.$el.dataset.index=t.index,t.$el.querySelectorAll("[data-lazy-srcset]").forEach((function(t){t.srcset=t.dataset.lazySrcset})),t.$el.querySelectorAll("[data-lazy-src]").forEach((function(t){var e=t.dataset.lazySrc;t instanceof HTMLImageElement?t.src=e:t.style.backgroundImage="url('".concat(e,"')")})),(o=t.$el.dataset.lazySrc)&&(t.$el.style.backgroundImage="url('".concat(o,"')")),t.state="ready")}}},{key:"removeSlideEl",value:function(t){t.$el&&!t.isDom&&(this.trigger("removeSlide",t),t.$el.remove(),t.$el=null)}},{key:"markSelectedSlides",value:function(){var t=this,e=this.option("classNames.slideSelected"),i="aria-hidden";this.slides.forEach((function(n,o){var a,s=n.$el;s&&((a=t.pages[t.page])&&a.indexes&&-1<a.indexes.indexOf(o)?(e&&!s.classList.contains(e)&&(s.classList.add(e),t.trigger("selectSlide",n)),s.removeAttribute(i)):(e&&s.classList.contains(e)&&(s.classList.remove(e),t.trigger("unselectSlide",n)),s.setAttribute(i,!0)))}))}},{key:"updatePage",value:function(){this.updateMetrics(),this.slideTo(this.page,{friction:0})}},{key:"onBeforeTransform",value:function(){this.option("infiniteX",this.option("infinite"))&&this.manageInfiniteTrack(),this.manageSlideVisiblity()}},{key:"manageInfiniteTrack",value:function(){var t,e,i=this.contentWidth,n=this.viewportWidth;if(!(!this.option("infiniteX",this.option("infinite"))||this.pages.length<2||i<n))return e=!1,(t=this.Panzoom).content.x<-1*(i-n)&&(t.content.x+=i,this.pageIndex=this.pageIndex-this.pages.length,e=!0),t.content.x>n&&(t.content.x-=i,this.pageIndex=this.pageIndex+this.pages.length,e=!0),e&&"pointerdown"===t.state&&t.resetDragPosition(),e}},{key:"onTouchEnd",value:function(t,e){var i=this.option("dragFree");!i&&1<this.pages.length&&t.dragOffset.time<350&&Math.abs(t.dragOffset.y)<1&&5<Math.abs(t.dragOffset.x)?this[t.dragOffset.x<0?"slideNext":"slidePrev"]():i?(i=f(this.getPageFromPosition(-1*t.transform.x),2)[1],this.setPage(i)):this.slideToClosest()}},{key:"slideToClosest",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=f(this.getPageFromPosition(-1*this.Panzoom.content.x),2)[1];this.slideTo(e,t)}},{key:"getPageFromPosition",value:function(t){var e=this.pages.length,i=(this.option("center")&&(t+=.5*this.viewportWidth),Math.floor(t/this.contentWidth)),n=(t-=i*this.contentWidth,this.slides.find((function(e){return e.left<=t&&e.left+e.width>t})));return n?[n=this.findPageForSlide(n.index),n+i*e]:[0,0]}},{key:"setPage",value:function(t,e){var i,n,o=0,a=parseInt(t,10)||0,s=this.page,r=this.pageIndex,l=this.pages.length,c=this.contentWidth,h=this.viewportWidth;return t=(a%l+l)%l,this.option("infiniteX",this.option("infinite"))&&h<c?(h=Math.floor(a/l)||0,o=this.pages[t].left+h*c,!0===e&&2<l&&(h=-1*this.Panzoom.content.x,e=o-c,c=o+c,i=Math.abs(h-o),n=Math.abs(h-e),(h=Math.abs(h-c))<i&&h<=n?(o=c,a+=l):n<i&&n<h&&(o=e,a-=l))):(t=a=Math.max(0,Math.min(a,l-1)),o=this.pages.length?this.pages[t].left:0),this.page=t,this.pageIndex=a,null!==s&&t!==s&&(this.prevPage=s,this.prevPageIndex=r,this.trigger("change",t,s)),o}},{key:"destroy",value:function(){var t=this;this.state="destroy",this.slides.forEach((function(e){t.removeSlideEl(e)})),this.slides=[],this.Panzoom.destroy(),this.detachPlugins()}}]),q);function q(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(o(this,q),e=y(!0,{},j,e),(e=H.call(this,e)).state="init",e.$container=t,e.$container instanceof HTMLElement)return e.slideNext=I(e.slideNext.bind(h(e)),250),e.slidePrev=I(e.slidePrev.bind(h(e)),250),e.init(),t.__Carousel=h(e),e;throw new Error("No root element provided")}function U(t){if(t&&Y){null===V&&document.createElement("div").focus({get preventScroll(){return!(V=!0)}});try{var e,i;t.setActive?t.setActive():V?t.focus({preventScroll:!0}):(e=window.pageXOffset||document.body.scrollTop,i=window.pageYOffset||document.body.scrollLeft,t.focus(),document.body.scrollTo({top:e,left:i,behavior:"auto"}))}catch(t){}}}X.version="4.0.31",X.Plugins=W;var Y=!("undefined"==typeof window||!window.document||!window.document.createElement),V=null,Z=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","video","audio","[contenteditable]",'[tabindex]:not([tabindex^="-"]):not([disabled]):not([aria-hidden])'];function G(t){o(this,G),this.fancybox=t,this.$container=null,this.state="init";for(var e=0,i=["onPrepare","onClosing","onKeydown"];e<i.length;e++){var n=i[e];this[n]=this[n].bind(this)}this.events={prepare:this.onPrepare,closing:this.onClosing,keydown:this.onKeydown}}function K(t){o(this,K),this.fancybox=t,this.viewport=null,this.pendingUpdate=null;for(var e=0,i=["onReady","onResize","onTouchstart","onTouchmove"];e<i.length;e++){var n=i[e];this[n]=this[n].bind(this)}}function J(t,e){for(var i=new URL(t),n=(i=new URLSearchParams(i.search),new URLSearchParams),o=0,a=[].concat(v(i),v(Object.entries(e)));o<a.length;o++){var s=(r=f(a[o],2))[0],r=r[1];"t"===s?n.set("start",parseInt(r)):n.set(s,r)}return n=n.toString(),(i=t.match(/#t=((.*)?\d+s)/))&&(n+="#t=".concat(i[1])),n}s(K,[{key:"onReady",value:function(){var t=window.visualViewport;t&&(this.viewport=t,this.startY=0,t.addEventListener("resize",this.onResize),this.updateViewport()),window.addEventListener("touchstart",this.onTouchstart,{passive:!1}),window.addEventListener("touchmove",this.onTouchmove,{passive:!1}),window.addEventListener("wheel",this.onWheel,{passive:!1})}},{key:"onResize",value:function(){this.updateViewport()}},{key:"updateViewport",value:function(){var t,e,i,n=this.fancybox,o=this.viewport,a=o.scale||1;(n=n.$container)&&(i=e=t="",.1<a-1&&(t="".concat(o.width*a,"px"),e="".concat(o.height*a,"px"),i="translate3d(".concat(o.offsetLeft,"px, ").concat(o.offsetTop,"px, 0) scale(").concat(1/a,")")),n.style.width=t,n.style.height=e,n.style.transform=i)}},{key:"onTouchstart",value:function(t){this.startY=(t.touches?t.touches[0]:t).screenY}},{key:"onTouchmove",value:function(t){var e,i,n,o=this.startY,a=window.innerWidth/window.document.documentElement.clientWidth;t.cancelable&&!(1<t.touches.length||1!=a)&&((a=x(t.composedPath()[0]))?(e=window.getComputedStyle(a),e=parseInt(e.getPropertyValue("height"),10),i=o<=(n=(t.touches?t.touches[0]:t).screenY)&&0===a.scrollTop,n=n<=o&&a.scrollHeight-a.scrollTop===e,(i||n)&&t.preventDefault()):t.preventDefault())}},{key:"onWheel",value:function(t){x(t.composedPath()[0])||t.preventDefault()}},{key:"cleanup",value:function(){this.pendingUpdate&&(cancelAnimationFrame(this.pendingUpdate),this.pendingUpdate=null);var t=this.viewport;t&&(t.removeEventListener("resize",this.onResize),this.viewport=null),window.removeEventListener("touchstart",this.onTouchstart,!1),window.removeEventListener("touchmove",this.onTouchmove,!1),window.removeEventListener("wheel",this.onWheel,{passive:!1})}},{key:"attach",value:function(){this.fancybox.on("initLayout",this.onReady)}},{key:"detach",value:function(){this.fancybox.off("initLayout",this.onReady),this.cleanup()}}]),F=K,s(G,[{key:"onPrepare",value:function(){this.getSlides().length<this.fancybox.option("Thumbs.minSlideCount")?this.state="disabled":!0===this.fancybox.option("Thumbs.autoStart")&&this.fancybox.Carousel.Panzoom.content.height>=this.fancybox.option("Thumbs.minScreenHeight")&&this.build()}},{key:"onClosing",value:function(){this.Carousel&&this.Carousel.Panzoom.detachEvents()}},{key:"onKeydown",value:function(t,e){e===t.option("Thumbs.key")&&this.toggle()}},{key:"build",value:function(){var t,e=this;this.$container||((t=document.createElement("div")).classList.add("fancybox__thumbs"),this.fancybox.$carousel.parentNode.insertBefore(t,this.fancybox.$carousel.nextSibling),this.Carousel=new X(t,y(!0,{Dots:!1,Navigation:!1,Sync:{friction:0},infinite:!1,center:!0,fill:!0,dragFree:!0,slidesPerPage:1,preload:1},this.fancybox.option("Thumbs.Carousel"),{Sync:{target:this.fancybox.Carousel},slides:this.getSlides()})),this.Carousel.Panzoom.on("wheel",(function(t,i){i.preventDefault(),e.fancybox[i.deltaY<0?"prev":"next"]()})),this.$container=t,this.state="visible")}},{key:"getSlides",value:function(){var t,e=[],i=m(this.fancybox.items);try{for(i.s();!(t=i.n()).done;){var n=t.value,o=n.thumb;o&&e.push({html:this.fancybox.option("Thumbs.tpl").replace(/\{\{src\}\}/gi,o),customClass:"has-thumb has-".concat(n.type||"image")})}}catch(t){i.e(t)}finally{i.f()}return e}},{key:"toggle",value:function(){"visible"===this.state?this.hide():"hidden"===this.state?this.show():this.build()}},{key:"show",value:function(){"hidden"===this.state&&(this.$container.style.display="",this.Carousel.Panzoom.attachEvents(),this.state="visible")}},{key:"hide",value:function(){"visible"===this.state&&(this.Carousel.Panzoom.detachEvents(),this.$container.style.display="none",this.state="hidden")}},{key:"cleanup",value:function(){this.Carousel&&(this.Carousel.destroy(),this.Carousel=null),this.$container&&(this.$container.remove(),this.$container=null),this.state="init"}},{key:"attach",value:function(){this.fancybox.on(this.events)}},{key:"detach",value:function(){this.fancybox.off(this.events),this.cleanup()}}]),(N=G).defaults={minSlideCount:2,minScreenHeight:500,autoStart:!0,key:"t",Carousel:{},tpl:'<div class="fancybox__thumb" style="background-image:url(\'{{src}}\')"></div>'};var Q={video:{autoplay:!0,ratio:16/9},youtube:{autohide:1,fs:1,rel:0,hd:1,wmode:"transparent",enablejsapi:1,html5:1},vimeo:{hd:1,show_title:1,show_byline:1,show_portrait:0,fullscreen:1},html5video:{tpl:'<video class="fancybox__html5video" playsinline controls controlsList="nodownload" poster="{{poster}}">\n  <source src="{{src}}" type="{{format}}" />Sorry, your browser doesn\'t support embedded videos.</video>',format:""}};function tt(t){o(this,tt),this.fancybox=t;for(var e=0,i=["onInit","onReady","onCreateSlide","onRemoveSlide","onSelectSlide","onUnselectSlide","onRefresh","onMessage"];e<i.length;e++){var n=i[e];this[n]=this[n].bind(this)}this.events={init:this.onInit,ready:this.onReady,"Carousel.createSlide":this.onCreateSlide,"Carousel.removeSlide":this.onRemoveSlide,"Carousel.selectSlide":this.onSelectSlide,"Carousel.unselectSlide":this.onUnselectSlide,"Carousel.refresh":this.onRefresh}}s(tt,[{key:"onInit",value:function(){var t,e=m(this.fancybox.items);try{for(e.s();!(t=e.n()).done;){var i=t.value;this.processType(i)}}catch(t){e.e(t)}finally{e.f()}}},{key:"processType",value:function(t){if(t.html)return t.src=t.html,t.type="html",void delete t.html;var e,i,n=t.src||"",o=t.type||this.fancybox.options.type,a=null;n&&"string"!=typeof n||((a=n.match(/(?:youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(?:watch\?(?:.*&)?v=|v\/|u\/|embed\/?)?(videoseries\?list=(?:.*)|[\w-]{11}|\?listType=(?:.*)&list=(?:.*))(?:.*)/i))?(e=J(n,this.fancybox.option("Html.youtube")),i=encodeURIComponent(a[1]),t.videoId=i,t.src="https://www.youtube-nocookie.com/embed/".concat(i,"?").concat(e),t.thumb=t.thumb||"https://i.ytimg.com/vi/".concat(i,"/mqdefault.jpg"),t.vendor="youtube",o="video"):(a=n.match(/^.+vimeo.com\/(?:\/)?([\d]+)(.*)?/))?(e=J(n,this.fancybox.option("Html.vimeo")),i=encodeURIComponent(a[1]),t.videoId=i,t.src="https://player.vimeo.com/video/".concat(i,"?").concat(e),t.vendor="vimeo",o="video"):(a=n.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:(?:(?:maps\/(?:place\/(?:.*)\/)?\@(.*),(\d+.?\d+?)z))|(?:\?ll=))(.*)?/i))?(t.src="//maps.google.".concat(a[1],"/?ll=").concat((a[2]?a[2]+"&z="+Math.floor(a[3])+(a[4]?a[4].replace(/^\//,"&"):""):a[4]+"").replace(/\?/,"&"),"&output=").concat(a[4]&&0<a[4].indexOf("layer=c")?"svembed":"embed"),o="map"):(a=n.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:maps\/search\/)(.*)/i))&&(t.src="//maps.google.".concat(a[1],"/maps?q=").concat(a[2].replace("query=","q=").replace("api=1",""),"&output=embed"),o="map"),o||("#"===n.charAt(0)?o="inline":(a=n.match(/\.(mp4|mov|ogv|webm)((\?|#).*)?$/i))?(o="html5video",t.format=t.format||"video/"+("ogv"===a[1]?"ogg":a[1])):n.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\?|#).*)?$)/i)?o="image":n.match(/\.(pdf)((\?|#).*)?$/i)&&(o="pdf")),t.type=o||this.fancybox.option("defaultType","image"),"html5video"!==o&&"video"!==o||(t.video=y({},this.fancybox.option("Html.video"),t.video),t._width&&t._height?t.ratio=parseFloat(t._width)/parseFloat(t._height):t.ratio=t.ratio||t.video.ratio||Q.video.ratio))}},{key:"onReady",value:function(){var t=this;this.fancybox.Carousel.slides.forEach((function(e){e.$el&&(t.setContent(e),e.index===t.fancybox.getSlide().index&&t.playVideo(e))}))}},{key:"onCreateSlide",value:function(t,e,i){"ready"===this.fancybox.state&&this.setContent(i)}},{key:"loadInlineContent",value:function(t){var e,i;t.src instanceof HTMLElement?e=t.src:"string"==typeof t.src&&(i=2===(i=t.src.split("#",2)).length&&""===i[0]?i[1]:i[0],e=document.getElementById(i)),e?("clone"===t.type||e.$placeHolder?(i=(i=(e=e.cloneNode(!0)).getAttribute("id"))?"".concat(i,"--clone"):"clone-".concat(this.fancybox.id,"-").concat(t.index),e.setAttribute("id",i)):((i=document.createElement("div")).classList.add("fancybox-placeholder"),e.parentNode.insertBefore(i,e),e.$placeHolder=i),this.fancybox.setContent(t,e)):this.fancybox.setError(t,"{{ELEMENT_NOT_FOUND}}")}},{key:"loadAjaxContent",value:function(t){var e=this.fancybox,i=new XMLHttpRequest,n=(e.showLoading(t),i.onreadystatechange=function(){i.readyState===XMLHttpRequest.DONE&&"ready"===e.state&&(e.hideLoading(t),200===i.status?e.setContent(t,i.responseText):e.setError(t,404===i.status?"{{AJAX_NOT_FOUND}}":"{{AJAX_FORBIDDEN}}"))},t.ajax||null);i.open(n?"POST":"GET",t.src),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.send(n),t.xhr=i}},{key:"loadIframeContent",value:function(t){var e=this,i=this.fancybox,n=document.createElement("iframe");if(n.className="fancybox__iframe",n.setAttribute("id","fancybox__iframe_".concat(i.id,"_").concat(t.index)),n.setAttribute("allow","autoplay; fullscreen"),n.setAttribute("scrolling","auto"),t.$iframe=n,"iframe"!==t.type||!1===t.preload)return n.setAttribute("src",t.src),this.fancybox.setContent(t,n),void this.resizeIframe(t);i.showLoading(t);var o=document.createElement("div");o.style.visibility="hidden",this.fancybox.setContent(t,o),o.appendChild(n),n.onerror=function(){i.setError(t,"{{IFRAME_ERROR}}")},n.onload=function(){i.hideLoading(t);var o=!1;n.isReady||(o=n.isReady=!0),n.src.length&&(n.parentNode.style.visibility="",e.resizeIframe(t),o&&i.revealContent(t))},n.setAttribute("src",t.src)}},{key:"setAspectRatio",value:function(t){var e,i,n,o=t.$content,a=t.ratio;o&&(e=t._width,t=t._height,(a||e&&t)&&(Object.assign(o.style,{width:e&&t?"100%":"",height:e&&t?"100%":"",maxWidth:"",maxHeight:""}),n=o.offsetWidth,i=o.offsetHeight,t=t||i,((e=e||n)>n||i<t)&&(e*=n=Math.min(n/e,i/t),t*=n),.01<Math.abs(e/t-a)&&(a<e/t?e=t*a:t=e/a),Object.assign(o.style,{width:"".concat(e,"px"),height:"".concat(t,"px")})))}},{key:"resizeIframe",value:function(t){var e=t.$iframe;if(e){var i=t._width||0,n=t._height||0,o=(i&&n&&(t.autoSize=!1),e.parentNode),a=o&&o.style;if(!1!==t.preload&&!1!==t.autoSize&&a)try{var s=window.getComputedStyle(o),r=parseFloat(s.paddingLeft)+parseFloat(s.paddingRight),l=parseFloat(s.paddingTop)+parseFloat(s.paddingBottom),c=e.contentWindow.document,h=c.getElementsByTagName("html")[0],d=c.body;a.width="",d.style.overflow="hidden",i=i||h.scrollWidth+r,a.width="".concat(i,"px"),d.style.overflow="",a.flex="0 0 auto",a.height="".concat(d.scrollHeight,"px"),n=h.scrollHeight+l}catch(t){}(i||n)&&(o={flex:"0 1 auto"},i&&(o.width="".concat(i,"px")),n&&(o.height="".concat(n,"px")),Object.assign(a,o))}}},{key:"onRefresh",value:function(t,e){var i=this;e.slides.forEach((function(t){t.$el&&(t.$iframe&&i.resizeIframe(t),t.ratio&&i.setAspectRatio(t))}))}},{key:"setContent",value:function(t){if(t&&!t.isDom){switch(t.type){case"html":this.fancybox.setContent(t,t.src);break;case"html5video":this.fancybox.setContent(t,this.fancybox.option("Html.html5video.tpl").replace(/\{\{src\}\}/gi,t.src).replace("{{format}}",t.format||t.html5video&&t.html5video.format||"").replace("{{poster}}",t.poster||t.thumb||""));break;case"inline":case"clone":this.loadInlineContent(t);break;case"ajax":this.loadAjaxContent(t);break;case"pdf":case"video":case"map":t.preload=!1;case"iframe":this.loadIframeContent(t)}t.ratio&&this.setAspectRatio(t)}}},{key:"onSelectSlide",value:function(t,e,i){"ready"===t.state&&this.playVideo(i)}},{key:"playVideo",value:function(t){if("html5video"===t.type&&t.video.autoplay)try{var e,i=t.$el.querySelector("video");!i||void 0!==(e=i.play())&&e.then((function(){})).catch((function(t){i.muted=!0,i.play()}))}catch(t){}"video"===t.type&&t.$iframe&&t.$iframe.contentWindow&&function e(){if("done"===t.state&&t.$iframe&&t.$iframe.contentWindow){var i;if(t.$iframe.isReady)return void((i=t.video&&t.video.autoplay?"youtube"==t.vendor?{event:"command",func:"playVideo"}:{method:"play",value:"true"}:i)&&t.$iframe.contentWindow.postMessage(JSON.stringify(i),"*"));"youtube"===t.vendor&&(i={event:"listening",id:t.$iframe.getAttribute("id")},t.$iframe.contentWindow.postMessage(JSON.stringify(i),"*"))}t.poller=setTimeout(e,250)}()}},{key:"onUnselectSlide",value:function(t,e,i){if("html5video"!==i.type){var n=!1;"vimeo"==i.vendor?n={method:"pause",value:"true"}:"youtube"===i.vendor&&(n={event:"command",func:"pauseVideo"}),n&&i.$iframe&&i.$iframe.contentWindow&&i.$iframe.contentWindow.postMessage(JSON.stringify(n),"*"),clearTimeout(i.poller)}else try{i.$el.querySelector("video").pause()}catch(t){}}},{key:"onRemoveSlide",value:function(t,e,i){i.xhr&&(i.xhr.abort(),i.xhr=null),i.$iframe&&(i.$iframe.onload=i.$iframe.onerror=null,i.$iframe.src="//about:blank",i.$iframe=null);var n=i.$content;"inline"===i.type&&n&&(n.classList.remove("fancybox__content"),"none"!==n.style.display&&(n.style.display="none")),i.$closeButton&&(i.$closeButton.remove(),i.$closeButton=null),(i=n&&n.$placeHolder)&&(i.parentNode.insertBefore(n,i),i.remove(),n.$placeHolder=null)}},{key:"onMessage",value:function(t){try{var e=JSON.parse(t.data);if("https://player.vimeo.com"===t.origin){if("ready"===e.event){var i,n=m(document.getElementsByClassName("fancybox__iframe"));try{for(n.s();!(i=n.n()).done;){var o=i.value;o.contentWindow===t.source&&(o.isReady=1)}}catch(t){n.e(t)}finally{n.f()}}}else"https://www.youtube-nocookie.com"===t.origin&&"onReady"===e.event&&(document.getElementById(e.id).isReady=1)}catch(t){}}},{key:"attach",value:function(){this.fancybox.on(this.events),window.addEventListener("message",this.onMessage,!1)}},{key:"detach",value:function(){this.fancybox.off(this.events),window.removeEventListener("message",this.onMessage,!1)}}]),(W=tt).defaults=Q,s(it,[{key:"onReady",value:function(){var t=this;this.fancybox.Carousel.slides.forEach((function(e){e.$el&&t.setContent(e)}))}},{key:"onDone",value:function(t,e){this.handleCursor(e)}},{key:"onClosing",value:function(t){clearTimeout(this.clickTimer),this.clickTimer=null,t.Carousel.slides.forEach((function(t){t.$image&&(t.state="destroy"),t.Panzoom&&t.Panzoom.detachEvents()})),"closing"===this.fancybox.state&&this.canZoom(t.getSlide())&&this.zoomOut()}},{key:"onCreateSlide",value:function(t,e,i){"ready"===this.fancybox.state&&this.setContent(i)}},{key:"onRemoveSlide",value:function(t,e,i){i.$image&&(i.$el.classList.remove(t.option("Image.canZoomInClass")),i.$image.remove(),i.$image=null),i.Panzoom&&(i.Panzoom.destroy(),i.Panzoom=null),i.$el&&i.$el.dataset&&delete i.$el.dataset.imageFit}},{key:"setContent",value:function(t){var e,i,n,o,a=this;t.isDom||t.html||t.type&&"image"!==t.type||t.$image||(t.type="image",t.state="loading",(e=document.createElement("div")).style.visibility="hidden",(i=document.createElement("img")).addEventListener("load",(function(e){e.stopImmediatePropagation(),a.onImageStatusChange(t)})),i.addEventListener("error",(function(){a.onImageStatusChange(t)})),i.src=t.src,i.alt="",i.draggable=!1,i.classList.add("fancybox__image"),t.srcset&&i.setAttribute("srcset",t.srcset),t.sizes&&i.setAttribute("sizes",t.sizes),t.$image=i,(n=this.fancybox.option("Image.wrap"))?((o=document.createElement("div")).classList.add("string"==typeof n?n:"fancybox__image-wrap"),o.appendChild(i),e.appendChild(o),t.$wrap=o):e.appendChild(i),t.$el.dataset.imageFit=this.fancybox.option("Image.fit"),this.fancybox.setContent(t,e),i.complete||i.error?this.onImageStatusChange(t):this.fancybox.showLoading(t))}},{key:"onImageStatusChange",value:function(t){var e=this,i=t.$image;i&&"loading"===t.state&&(i.complete&&i.naturalWidth&&i.naturalHeight?(this.fancybox.hideLoading(t),"contain"===this.fancybox.option("Image.fit")&&this.initSlidePanzoom(t),t.$el.addEventListener("wheel",(function(i){return e.onWheel(t,i)}),{passive:!1}),t.$content.addEventListener("click",(function(i){return e.onClick(t,i)}),{passive:!1}),this.revealContent(t)):this.fancybox.setError(t,"{{IMAGE_ERROR}}"))}},{key:"initSlidePanzoom",value:function(t){var e=this;t.Panzoom||(t.Panzoom=new _(t.$el,y(!0,this.fancybox.option("Image.Panzoom",{}),{viewport:t.$wrap,content:t.$image,width:t._width,height:t._height,wrapInner:!1,textSelection:!0,touch:this.fancybox.option("Image.touch"),panOnlyZoomed:!0,click:!1,wheel:!1})),t.Panzoom.on("startAnimation",(function(){e.fancybox.trigger("Image.startAnimation",t)})),t.Panzoom.on("endAnimation",(function(){"zoomIn"===t.state&&e.fancybox.done(t),e.handleCursor(t),e.fancybox.trigger("Image.endAnimation",t)})),t.Panzoom.on("afterUpdate",(function(){e.handleCursor(t),e.fancybox.trigger("Image.afterUpdate",t)})))}},{key:"revealContent",value:function(t){null===this.fancybox.Carousel.prevPage&&t.index===this.fancybox.options.startIndex&&this.canZoom(t)?this.zoomIn():this.fancybox.revealContent(t)}},{key:"getZoomInfo",value:function(t){var e,i=(e=t.$thumb.getBoundingClientRect()).width,n=e.height,o=(t=t.$content.getBoundingClientRect()).width,a=t.height;return{top:t.top-e.top,left:t=t.left-e.left,scale:o&&i?i/o:1,opacity:e="auto"===(e=this.fancybox.option("Image.zoomOpacity"))?.1<Math.abs(i/n-o/a):e}}},{key:"canZoom",value:function(t){var e,i,n=this.fancybox,o=n.$container;return(!window.visualViewport||1===window.visualViewport.scale)&&(!(t.Panzoom&&!t.Panzoom.content.width)&&(!(!n.option("Image.zoom")||"contain"!==n.option("Image.fit"))&&(!(!(n=t.$thumb)||"loading"===t.state)&&(o.classList.add("fancybox__no-click"),t=n.getBoundingClientRect(),i=this.fancybox.option("Image.ignoreCoveredThumbnail")?(i=document.elementFromPoint(t.left+1,t.top+1)===n,e=document.elementFromPoint(t.right-1,t.bottom-1)===n,i&&e):document.elementFromPoint(t.left+.5*t.width,t.top+.5*t.height)===n,o.classList.remove("fancybox__no-click"),i))))}},{key:"zoomIn",value:function(){var t=this.fancybox,e=t.getSlide(),i=e.Panzoom,n=(s=this.getZoomInfo(e)).top,o=s.left,a=s.scale,s=s.opacity;t.trigger("reveal",e),i.panTo({x:-1*o,y:-1*n,scale:a,friction:0,ignoreBounds:!0}),e.$content.style.visibility="",e.state="zoomIn",!0===s&&i.on("afterTransform",(function(t){"zoomIn"!==e.state&&"zoomOut"!==e.state||(t.$content.style.opacity=Math.min(1,1-(1-t.content.scale)/(1-a)))})),i.panTo({x:0,y:0,scale:1,friction:this.fancybox.option("Image.zoomFriction")})}},{key:"zoomOut",value:function(){var t,e,i=this,n=this.fancybox,o=n.getSlide(),a=o.Panzoom;a&&(o.state="zoomOut",n.state="customClosing",o.$caption&&(o.$caption.style.visibility="hidden"),t=this.fancybox.option("Image.zoomFriction"),e=function(e){var n=(l=i.getZoomInfo(o)).top,s=l.left,r=l.scale,l=l.opacity;e||l||(t*=.82),a.panTo({x:-1*s,y:-1*n,scale:r,friction:t,ignoreBounds:!0}),t*=.98},window.addEventListener("scroll",e),a.once("endAnimation",(function(){window.removeEventListener("scroll",e),n.destroy()})),e())}},{key:"handleCursor",value:function(t){var e,i,n,o,a;"image"===t.type&&t.$el&&(e=t.Panzoom,i=this.fancybox.option("Image.click",!1,t),n=this.fancybox.option("Image.touch"),t=t.$el.classList,o=this.fancybox.option("Image.canZoomInClass"),a=this.fancybox.option("Image.canZoomOutClass"),t.remove(a),t.remove(o),e&&"toggleZoom"===i?e&&1===e.content.scale&&.01<e.option("maxScale")-e.content.scale?t.add(o):1<e.content.scale&&!n&&t.add(a):"close"===i&&t.add(a))}},{key:"onWheel",value:function(t,e){if("ready"===this.fancybox.state&&!1!==this.fancybox.trigger("Image.wheel",e))switch(this.fancybox.option("Image.wheel")){case"zoom":"done"===t.state&&t.Panzoom&&t.Panzoom.zoomWithWheel(e);break;case"close":this.fancybox.close();break;case"slide":this.fancybox[e.deltaY<0?"prev":"next"]()}}},{key:"onClick",value:function(t,e){var i=this;if("ready"===this.fancybox.state&&(!(n=t.Panzoom)||!n.dragPosition.midPoint&&0===n.dragOffset.x&&0===n.dragOffset.y&&1===n.dragOffset.scale)){if(this.fancybox.Carousel.Panzoom.lockAxis)return!1;var n,o=function(n){switch(n){case"toggleZoom":e.stopPropagation(),t.Panzoom&&t.Panzoom.zoomWithClick(e);break;case"close":i.fancybox.close();break;case"next":e.stopPropagation(),i.fancybox.next()}},a=this.fancybox.option("Image.click");(n=this.fancybox.option("Image.doubleClick"))?this.clickTimer?(clearTimeout(this.clickTimer),this.clickTimer=null,o(n)):this.clickTimer=setTimeout((function(){i.clickTimer=null,o(a)}),300):o(a)}}},{key:"onPageChange",value:function(t,e){var i=t.getSlide();e.slides.forEach((function(t){t.Panzoom&&"done"===t.state&&t.index!==i.index&&t.Panzoom.panTo({x:0,y:0,scale:1,friction:.8})}))}},{key:"attach",value:function(){this.fancybox.on(this.events)}},{key:"detach",value:function(){this.fancybox.off(this.events)}}]);var et=it;function it(t){o(this,it),this.fancybox=t;for(var e=0,i=["onReady","onClosing","onDone","onPageChange","onCreateSlide","onRemoveSlide","onImageStatusChange"];e<i.length;e++){var n=i[e];this[n]=this[n].bind(this)}this.events={ready:this.onReady,closing:this.onClosing,done:this.onDone,"Carousel.change":this.onPageChange,"Carousel.createSlide":this.onCreateSlide,"Carousel.removeSlide":this.onRemoveSlide}}et.defaults={canZoomInClass:"can-zoom_in",canZoomOutClass:"can-zoom_out",zoom:!0,zoomOpacity:"auto",zoomFriction:.82,ignoreCoveredThumbnail:!1,touch:!0,click:"toggleZoom",doubleClick:null,wheel:"zoom",fit:"contain",wrap:!1,Panzoom:{ratio:1}},s(ht,[{key:"onChange",value:function(t){var e,i=this,n=t.Carousel,o=(this.timer&&clearTimeout(this.timer),null===n.prevPage),a=t.getSlide(),s=new URL(document.URL).hash,r=!1;a.slug?r="#"+a.slug:(e=a.$trigger&&a.$trigger.dataset,(t=t.option("slug")||e&&e.fancybox)&&t.length&&"true"!==t&&(r="#"+t+(1<n.slides.length?"-"+(a.index+1):""))),o&&(this.origHash=s!==r?s:""),r&&s!==r&&(this.timer=setTimeout((function(){try{window.history[o?"pushState":"replaceState"]({},document.title,window.location.pathname+window.location.search+r),o&&(i.hasCreatedHistory=!0)}catch(t){}}),300))}},{key:"onClosing",value:function(){if(this.timer&&clearTimeout(this.timer),!0!==this.hasSilentClose)try{window.history.replaceState({},document.title,window.location.pathname+window.location.search+(this.origHash||""))}catch(t){}}},{key:"attach",value:function(t){t.on(this.events)}},{key:"detach",value:function(t){t.off(this.events)}}],[{key:"startFromUrl",value:function(){var t,e,i,n=ht.Fancybox;n&&!n.getInstance()&&!1!==n.defaults.Hash&&(i=(e=ht.getParsedURL()).hash,t=e.slug,e=e.index,t&&((i=document.querySelector('[data-slug="'.concat(i,'"]')))&&i.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})),n.getInstance()||(n=document.querySelectorAll('[data-fancybox="'.concat(t,'"]'))).length&&(null===e&&1===n.length?i=n[0]:e&&(i=n[e-1]),i&&i.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})))))}},{key:"onHashChange",value:function(){var t,e=(i=ht.getParsedURL()).slug,i=i.index;if((t=(t=ht.Fancybox)&&t.getInstance())&&t.plugins.Hash){if(e){var n=t.Carousel;if(e===t.option("slug"))return n.slideTo(i-1);var o,a,s=m(n.slides);try{for(s.s();!(o=s.n()).done;){var r=o.value;if(r.slug&&r.slug===e)return n.slideTo(r.index)}}catch(i){s.e(i)}finally{s.f()}if((a=(a=t.getSlide()).$trigger&&a.$trigger.dataset)&&a.fancybox===e)return n.slideTo(i-1)}t.plugins.Hash.hasSilentClose=!0,t.close()}ht.startFromUrl()}},{key:"create",value:function(t){function e(){window.addEventListener("hashchange",ht.onHashChange,!1),ht.startFromUrl()}ht.Fancybox=t,Y&&window.requestAnimationFrame((function(){/complete|interactive|loaded/.test(document.readyState)?e():document.addEventListener("DOMContentLoaded",e)}))}},{key:"destroy",value:function(){window.removeEventListener("hashchange",ht.onHashChange,!1)}},{key:"getParsedURL",value:function(){var t=window.location.hash.substr(1),e=t.split("-"),i=1<e.length&&/^\+?\d+$/.test(e[e.length-1])&&parseInt(e.pop(-1),10)||null;return{hash:t,slug:e.join("-"),index:i}}}]);var nt=ht,ot={pageXOffset:0,pageYOffset:0,element:function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement},activate:function(t){ot.pageXOffset=window.pageXOffset,ot.pageYOffset=window.pageYOffset,t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()},deactivate:function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}},at=(s(ct,[{key:"isActive",value:function(){return this.active}},{key:"setTimer",value:function(){var t,e,i=this;this.active&&!this.timer&&(t=this.fancybox.option("slideshow.delay",3e3),this.timer=setTimeout((function(){i.timer=null,i.fancybox.option("infinite")||i.fancybox.getSlide().index!==i.fancybox.Carousel.slides.length-1?i.fancybox.next():i.fancybox.jumpTo(0,{friction:0})}),t),(e=this.$progress)||((e=document.createElement("div")).classList.add("fancybox__progress"),this.fancybox.$carousel.parentNode.insertBefore(e,this.fancybox.$carousel),(this.$progress=e).offsetHeight),e.style.transitionDuration="".concat(t,"ms"),e.style.transform="scaleX(1)")}},{key:"clearTimer",value:function(){clearTimeout(this.timer),this.timer=null,this.$progress&&(this.$progress.style.transitionDuration="",this.$progress.style.transform="",this.$progress.offsetHeight)}},{key:"activate",value:function(){this.active||(this.active=!0,this.fancybox.$container.classList.add("has-slideshow"),"done"===this.fancybox.getSlide().state&&this.setTimer(),document.addEventListener("visibilitychange",this.handleVisibilityChange,!1))}},{key:"handleVisibilityChange",value:function(){this.deactivate()}},{key:"deactivate",value:function(){this.active=!1,this.clearTimer(),this.fancybox.$container.classList.remove("has-slideshow"),document.removeEventListener("visibilitychange",this.handleVisibilityChange,!1)}},{key:"toggle",value:function(){this.active?this.deactivate():1<this.fancybox.Carousel.slides.length&&this.activate()}}]),ct),st={display:["counter","zoom","slideshow","fullscreen","thumbs","close"],autoEnable:!0,items:{counter:{position:"left",type:"div",class:"fancybox__counter",html:'<span data-fancybox-index=""></span>&nbsp;/&nbsp;<span data-fancybox-count=""></span>',attr:{tabindex:-1}},prev:{type:"button",class:"fancybox__button--prev",label:"PREV",html:'<svg viewBox="0 0 24 24"><path d="M15 4l-8 8 8 8"/></svg>',attr:{"data-fancybox-prev":""}},next:{type:"button",class:"fancybox__button--next",label:"NEXT",html:'<svg viewBox="0 0 24 24"><path d="M8 4l8 8-8 8"/></svg>',attr:{"data-fancybox-next":""}},fullscreen:{type:"button",class:"fancybox__button--fullscreen",label:"TOGGLE_FULLSCREEN",html:'<svg viewBox="0 0 24 24">\n                <g><path d="M3 8 V3h5"></path><path d="M21 8V3h-5"></path><path d="M8 21H3v-5"></path><path d="M16 21h5v-5"></path></g>\n                <g><path d="M7 2v5H2M17 2v5h5M2 17h5v5M22 17h-5v5"/></g>\n            </svg>',click:function(t){t.preventDefault(),ot.element()?ot.deactivate():ot.activate(this.fancybox.$container)}},slideshow:{type:"button",class:"fancybox__button--slideshow",label:"TOGGLE_SLIDESHOW",html:'<svg viewBox="0 0 24 24">\n                <g><path d="M6 4v16"/><path d="M20 12L6 20"/><path d="M20 12L6 4"/></g>\n                <g><path d="M7 4v15M17 4v15"/></g>\n            </svg>',click:function(t){t.preventDefault(),this.Slideshow.toggle()}},zoom:{type:"button",class:"fancybox__button--zoom",label:"TOGGLE_ZOOM",html:'<svg viewBox="0 0 24 24"><circle cx="10" cy="10" r="7"></circle><path d="M16 16 L21 21"></svg>',click:function(t){t.preventDefault(),(t=this.fancybox.getSlide().Panzoom)&&t.toggleZoom()}},download:{type:"link",label:"DOWNLOAD",class:"fancybox__button--download",html:'<svg viewBox="0 0 24 24"><path d="M12 15V3m0 12l-4-4m4 4l4-4M2 17l.62 2.48A2 2 0 004.56 21h14.88a2 2 0 001.94-1.51L22 17"/></svg>',click:function(t){t.stopPropagation()}},thumbs:{type:"button",label:"TOGGLE_THUMBS",class:"fancybox__button--thumbs",html:'<svg viewBox="0 0 24 24"><circle cx="4" cy="4" r="1" /><circle cx="12" cy="4" r="1" transform="rotate(90 12 4)"/><circle cx="20" cy="4" r="1" transform="rotate(90 20 4)"/><circle cx="4" cy="12" r="1" transform="rotate(90 4 12)"/><circle cx="12" cy="12" r="1" transform="rotate(90 12 12)"/><circle cx="20" cy="12" r="1" transform="rotate(90 20 12)"/><circle cx="4" cy="20" r="1" transform="rotate(90 4 20)"/><circle cx="12" cy="20" r="1" transform="rotate(90 12 20)"/><circle cx="20" cy="20" r="1" transform="rotate(90 20 20)"/></svg>',click:function(t){t.stopPropagation(),(t=this.fancybox.plugins.Thumbs)&&t.toggle()}},close:{type:"button",label:"CLOSE",class:"fancybox__button--close",html:'<svg viewBox="0 0 24 24"><path d="M20 20L4 4m16 0L4 20"></path></svg>',attr:{"data-fancybox-close":"",tabindex:0}}}},rt=(s(lt,[{key:"onInit",value:function(){if(this.fancybox.option("Toolbar.autoEnable")){var t,e=!1,i=m(this.fancybox.items);try{for(i.s();!(t=i.n()).done;)if("image"===t.value.type){e=!0;break}}catch(t){i.e(t)}finally{i.f()}if(!e)return void(this.state="disabled")}var n,o=m(this.fancybox.option("Toolbar.display"));try{for(o.s();!(n=o.n()).done;){var a=n.value;if("close"===(C(a)?a.id:a)){this.fancybox.options.closeButton=!1;break}}}catch(t){o.e(t)}finally{o.f()}}},{key:"onPrepare",value:function(){var t=this.fancybox;if("init"===this.state&&(this.build(),this.update(),this.Slideshow=new at(t),!t.Carousel.prevPage&&(t.option("slideshow.autoStart")&&this.Slideshow.activate(),t.option("fullscreen.autoStart")&&!ot.element())))try{ot.activate(t.$container)}catch(t){}}},{key:"onFsChange",value:function(){window.scrollTo(ot.pageXOffset,ot.pageYOffset)}},{key:"onSettle",value:function(){var t=this.fancybox,e=this.Slideshow;e&&e.isActive()&&(t.getSlide().index!==t.Carousel.slides.length-1||t.option("infinite")?"done"===t.getSlide().state&&e.setTimer():e.deactivate())}},{key:"onChange",value:function(){this.update(),this.Slideshow&&this.Slideshow.isActive()&&this.Slideshow.clearTimer()}},{key:"onDone",value:function(t,e){var i=this.Slideshow;e.index===t.getSlide().index&&(this.update(),i&&i.isActive()&&(t.option("infinite")||e.index!==t.Carousel.slides.length-1?i.setTimer():i.deactivate()))}},{key:"onRefresh",value:function(t){t&&t.index!==this.fancybox.getSlide().index||(this.update(),!this.Slideshow||!this.Slideshow.isActive()||t&&"done"!==t.state||this.Slideshow.deactivate())}},{key:"onKeydown",value:function(t,e,i){" "===e&&this.Slideshow&&(this.Slideshow.toggle(),i.preventDefault())}},{key:"onClosing",value:function(){this.Slideshow&&this.Slideshow.deactivate(),document.removeEventListener("fullscreenchange",this.onFsChange)}},{key:"createElement",value:function(t){var e,i;for(i in"div"===t.type?e=document.createElement("div"):(e=document.createElement("link"===t.type?"a":"button")).classList.add("carousel__button"),e.innerHTML=t.html,e.setAttribute("tabindex",t.tabindex||0),t.class&&(n=e.classList).add.apply(n,v(t.class.split(" "))),t.attr)e.setAttribute(i,t.attr[i]);t.label&&e.setAttribute("title",this.fancybox.localize("{{".concat(t.label,"}}"))),t.click&&e.addEventListener("click",t.click.bind(this)),"prev"===t.id&&e.setAttribute("data-fancybox-prev",""),"next"===t.id&&e.setAttribute("data-fancybox-next","");var n=e.querySelector("svg");return n&&(n.setAttribute("role","img"),n.setAttribute("tabindex","-1"),n.setAttribute("xmlns","http://www.w3.org/2000/svg")),e}},{key:"build",value:function(){var t=this;this.cleanup();var e,i=this.fancybox.option("Toolbar.items"),n=[{position:"left",items:[]},{position:"center",items:[]},{position:"right",items:[]}],o=this.fancybox.plugins.Thumbs,a=m(this.fancybox.option("Toolbar.display"));try{for(a.s();!(e=a.n()).done;)!function(){var a=e.value,s=void 0,r=C(a)?(s=a.id,y({},i[s],a)):i[s=a];if(!(["counter","next","prev","slideshow"].includes(s)&&t.fancybox.items.length<2)){if("fullscreen"===s){if(!document.fullscreenEnabled||window.fullScreen)return;document.addEventListener("fullscreenchange",t.onFsChange)}if(("thumbs"!==s||o&&"disabled"!==o.state)&&r){var l=r.position||"right";(a=n.find((function(t){return t.position===l})))&&a.items.push(r)}}}()}catch(t){a.e(t)}finally{a.f()}var s=document.createElement("div");s.classList.add("fancybox__toolbar");for(var r=0,l=n;r<l.length;r++){var c=l[r];if(c.items.length){var h=document.createElement("div");h.classList.add("fancybox__toolbar__items"),h.classList.add("fancybox__toolbar__items--".concat(c.position));var d,u=m(c.items);try{for(u.s();!(d=u.n()).done;){var f=d.value;h.appendChild(this.createElement(f))}}catch(t){u.e(t)}finally{u.f()}s.appendChild(h)}}this.fancybox.$carousel.parentNode.insertBefore(s,this.fancybox.$carousel),this.$container=s}},{key:"update",value:function(){var t,e=this.fancybox.getSlide(),i=e.index,n=this.fancybox.items.length,o=e.downloadSrc||("image"!==e.type||e.error?null:e.src),a=m(this.fancybox.$container.querySelectorAll("a.fancybox__button--download"));try{for(a.s();!(t=a.n()).done;){var s=t.value;o?(s.removeAttribute("disabled"),s.removeAttribute("tabindex"),s.setAttribute("href",o),s.setAttribute("download",o),s.setAttribute("target","_blank")):(s.setAttribute("disabled",""),s.setAttribute("tabindex",-1),s.removeAttribute("href"),s.removeAttribute("download"))}}catch(t){a.e(t)}finally{a.f()}var r,l=e.Panzoom,c=l&&l.option("maxScale")>l.option("baseScale"),h=m(this.fancybox.$container.querySelectorAll(".fancybox__button--zoom"));try{for(h.s();!(r=h.n()).done;){var d=r.value;c?d.removeAttribute("disabled"):d.setAttribute("disabled","")}}catch(t){h.e(t)}finally{h.f()}var u,f=m(this.fancybox.$container.querySelectorAll("[data-fancybox-index]"));try{for(f.s();!(u=f.n()).done;)u.value.innerHTML=e.index+1}catch(t){f.e(t)}finally{f.f()}var v,p=m(this.fancybox.$container.querySelectorAll("[data-fancybox-count]"));try{for(p.s();!(v=p.n()).done;)v.value.innerHTML=n}catch(t){p.e(t)}finally{p.f()}if(!this.fancybox.option("infinite")){var g,y=m(this.fancybox.$container.querySelectorAll("[data-fancybox-prev]"));try{for(y.s();!(g=y.n()).done;){var b=g.value;0===i?b.setAttribute("disabled",""):b.removeAttribute("disabled")}}catch(t){y.e(t)}finally{y.f()}var x,w=m(this.fancybox.$container.querySelectorAll("[data-fancybox-next]"));try{for(w.s();!(x=w.n()).done;){var k=x.value;i===n-1?k.setAttribute("disabled",""):k.removeAttribute("disabled")}}catch(t){w.e(t)}finally{w.f()}}}},{key:"cleanup",value:function(){this.Slideshow&&this.Slideshow.isActive()&&this.Slideshow.clearTimer(),this.$container&&this.$container.remove(),this.$container=null}},{key:"attach",value:function(){this.fancybox.on(this.events)}},{key:"detach",value:function(){this.fancybox.off(this.events),this.cleanup()}}]),lt);function lt(t){var e=this;o(this,lt),this.fancybox=t,this.$container=null,this.state="init";for(var i=0,n=["onInit","onPrepare","onDone","onKeydown","onClosing","onChange","onSettle","onRefresh"];i<n.length;i++){var a=n[i];this[a]=this[a].bind(this)}this.events={init:this.onInit,prepare:this.onPrepare,done:this.onDone,keydown:this.onKeydown,closing:this.onClosing,"Carousel.change":this.onChange,"Carousel.settle":this.onSettle,"Carousel.Panzoom.touchStart":function(){return e.onRefresh()},"Image.startAnimation":function(t,i){return e.onRefresh(i)},"Image.afterUpdate":function(t,i){return e.onRefresh(i)}}}function ct(t){o(this,ct),this.fancybox=t,this.active=!1,this.handleVisibilityChange=this.handleVisibilityChange.bind(this)}function ht(t){o(this,ht),this.fancybox=t;for(var e=0,i=["onChange","onClosing"];e<i.length;e++){var n=i[e];this[n]=this[n].bind(this)}this.events={initCarousel:this.onChange,"Carousel.change":this.onChange,closing:this.onClosing},this.hasCreatedHistory=!1,this.origHash="",this.timer=null}rt.defaults=st,st={ScrollLock:F,Thumbs:N,Html:W,Toolbar:rt,Image:et,Hash:nt};var dt,ut={startIndex:0,preload:1,infinite:!0,showClass:"fancybox-zoomInUp",hideClass:"fancybox-fadeOut",animated:!0,hideScrollbar:!0,parentEl:null,mainClass:null,autoFocus:!0,trapFocus:!0,placeFocusBack:!0,click:"close",closeButton:"inside",dragToClose:!0,keyboard:{Escape:"close",Delete:"close",Backspace:"close",PageUp:"next",PageDown:"prev",ArrowUp:"next",ArrowDown:"prev",ArrowRight:"next",ArrowLeft:"prev"},template:{closeButton:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M20 20L4 4m16 0L4 20"/></svg>',spinner:'<svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="25 25 50 50" tabindex="-1"><circle cx="50" cy="50" r="20"/></svg>',main:null},l10n:{CLOSE:"Close",NEXT:"Next",PREV:"Previous",MODAL:"You can close this modal content with the ESC key",ERROR:"Something Went Wrong, Please Try Again Later",IMAGE_ERROR:"Image Not Found",ELEMENT_NOT_FOUND:"HTML Element Not Found",AJAX_NOT_FOUND:"Error Loading AJAX : Not Found",AJAX_FORBIDDEN:"Error Loading AJAX : Forbidden",IFRAME_ERROR:"Error Loading Page",TOGGLE_ZOOM:"Toggle zoom level",TOGGLE_THUMBS:"Toggle thumbnails",TOGGLE_SLIDESHOW:"Toggle slideshow",TOGGLE_FULLSCREEN:"Toggle full-screen mode",DOWNLOAD:"Download"}},ft=new Map,vt=0,pt=(r(gt,T),dt=d(gt),s(gt,[{key:"option",value:function(t){for(var e=(e=this.getSlide())?e[t]:void 0,i=arguments.length,n=new Array(1<i?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];return void 0!==e?"function"==typeof e?e.call.apply(e,[this,this].concat(n)):e:(e=u(l(gt.prototype),"option",this)).call.apply(e,[this,t].concat(n))}},{key:"bindHandlers",value:function(){for(var t=0,e=["onMousedown","onKeydown","onClick","onFocus","onCreateSlide","onSettle","onTouchMove","onTouchEnd","onTransform"];t<e.length;t++){var i=e[t];this[i]=this[i].bind(this)}}},{key:"attachEvents",value:function(){document.addEventListener("mousedown",this.onMousedown),document.addEventListener("keydown",this.onKeydown,!0),this.option("trapFocus")&&document.addEventListener("focus",this.onFocus,!0),this.$container.addEventListener("click",this.onClick)}},{key:"detachEvents",value:function(){document.removeEventListener("mousedown",this.onMousedown),document.removeEventListener("keydown",this.onKeydown,!0),document.removeEventListener("focus",this.onFocus,!0),this.$container.removeEventListener("click",this.onClick)}},{key:"initLayout",value:function(){var t,e,i=this;return this.$root=this.option("parentEl")||document.body,(e=this.option("template.main"))&&(this.$root.insertAdjacentHTML("beforeend",this.localize(e)),this.$container=this.$root.querySelector(".fancybox__container")),this.$container||(this.$container=document.createElement("div"),this.$root.appendChild(this.$container)),this.$container.onscroll=function(){return i.$container.scrollLeft=0,!1},Object.entries({class:"fancybox__container",role:"dialog",tabIndex:"-1","aria-modal":"true","aria-hidden":"true","aria-label":this.localize("{{MODAL}}")}).forEach((function(t){var e;return(e=i.$container).setAttribute.apply(e,v(t))})),this.option("animated")&&this.$container.classList.add("is-animated"),this.$backdrop=this.$container.querySelector(".fancybox__backdrop"),this.$backdrop||(this.$backdrop=document.createElement("div"),this.$backdrop.classList.add("fancybox__backdrop"),this.$container.appendChild(this.$backdrop)),this.$carousel=this.$container.querySelector(".fancybox__carousel"),this.$carousel||(this.$carousel=document.createElement("div"),this.$carousel.classList.add("fancybox__carousel"),this.$container.appendChild(this.$carousel)),(this.$container.Fancybox=this).id=this.$container.getAttribute("id"),this.id||(this.id=this.options.id||++vt,this.$container.setAttribute("id","fancybox-"+this.id)),(e=this.option("mainClass"))&&(t=this.$container.classList).add.apply(t,v(e.split(" "))),document.documentElement.classList.add("with-fancybox"),this.trigger("initLayout"),this}},{key:"setItems",value:function(t){var e,i=[],n=m(t);try{for(n.s();!(e=n.n()).done;){var o,a,s=e.value,r=s.$trigger,l=(r&&(o=r.dataset||{},s.src=o.src||r.getAttribute("href")||s.src,s.type=o.type||s.type,!s.src&&r instanceof HTMLImageElement&&(s.src=r.currentSrc||s.$trigger.src)),s.$thumb),c=(l||!(l=(a=s.$trigger&&s.$trigger.origTarget)?a instanceof HTMLImageElement?a:a.querySelector("img:not([aria-hidden])"):l)&&s.$trigger&&(l=s.$trigger instanceof HTMLImageElement?s.$trigger:s.$trigger.querySelector("img:not([aria-hidden])")),s.$thumb=l||null,s.thumb);(c=!c&&l&&!(c=l.currentSrc||l.src)&&l.dataset?l.dataset.lazySrc||l.dataset.src:c)||"image"!==s.type||(c=s.src),s.thumb=c||null,s.caption=s.caption||"",i.push(s)}}catch(t){n.e(t)}finally{n.f()}this.items=i}},{key:"initCarousel",value:function(){var t=this;return this.Carousel=new X(this.$carousel,y(!0,{},{prefix:"",classNames:{viewport:"fancybox__viewport",track:"fancybox__track",slide:"fancybox__slide"},textSelection:!0,preload:this.option("preload"),friction:.88,slides:this.items,initialPage:this.options.startIndex,slidesPerPage:1,infiniteX:this.option("infinite"),infiniteY:!0,l10n:this.option("l10n"),Dots:!1,Navigation:{classNames:{main:"fancybox__nav",button:"carousel__button",next:"is-next",prev:"is-prev"}},Panzoom:{textSelection:!0,panOnlyZoomed:function(){return t.Carousel&&t.Carousel.pages&&t.Carousel.pages.length<2&&!t.option("dragToClose")},lockAxis:function(){var e;if(t.Carousel)return e="x",t.option("dragToClose")&&(e+="y"),e}},on:{"*":function(e){for(var i=arguments.length,n=new Array(1<i?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];return t.trigger.apply(t,["Carousel.".concat(e)].concat(n))},init:function(e){return t.Carousel=e},createSlide:this.onCreateSlide,settle:this.onSettle}},this.option("Carousel"))),this.option("dragToClose")&&this.Carousel.Panzoom.on({touchMove:this.onTouchMove,afterTransform:this.onTransform,touchEnd:this.onTouchEnd}),this.trigger("initCarousel"),this}},{key:"onCreateSlide",value:function(t,e){var i,n,o=e.caption||"";"string"==typeof(o="function"==typeof this.options.caption?this.options.caption.call(this,this,this.Carousel,e):o)&&o.length&&(i=document.createElement("div"),n="fancybox__caption_".concat(this.id,"_").concat(e.index),i.className="fancybox__caption",i.innerHTML=o,i.setAttribute("id",n),e.$caption=e.$el.appendChild(i),e.$el.classList.add("has-caption"),e.$el.setAttribute("aria-labelledby",n))}},{key:"onSettle",value:function(){this.option("autoFocus")&&this.focus()}},{key:"onFocus",value:function(t){this.isTopmost()&&this.focus(t)}},{key:"onClick",value:function(t){if(!t.defaultPrevented){var e=t.composedPath()[0];if(e.matches("[data-fancybox-close]"))return t.preventDefault(),void gt.close(!1,t);if(e.matches("[data-fancybox-next]"))return t.preventDefault(),void gt.next();if(e.matches("[data-fancybox-prev]"))return t.preventDefault(),void gt.prev();var i=document.activeElement;if(i){if(i.closest("[contenteditable]"))return;e.matches(Z)||i.blur()}if(!e.closest(".fancybox__content")&&!getSelection().toString().length&&!1!==this.trigger("click",t))switch(this.option("click")){case"close":this.close();break;case"next":this.next()}}}},{key:"onTouchMove",value:function(){var t=this.getSlide().Panzoom;return!t||1===t.content.scale}},{key:"onTouchEnd",value:function(t){var e=t.dragOffset.y;150<=Math.abs(e)||35<=Math.abs(e)&&t.dragOffset.time<350?(this.option("hideClass")&&(this.getSlide().hideClass="fancybox-throwOut".concat(t.content.y<0?"Up":"Down")),this.close()):"y"===t.lockAxis&&t.panTo({y:0})}},{key:"onTransform",value:function(t){var e;this.$backdrop&&(e=(e=Math.abs(t.content.y))<1?"":Math.max(.33,Math.min(1,1-e/t.content.fitHeight*1.5)),this.$container.style.setProperty("--fancybox-ts",e?"0s":""),this.$container.style.setProperty("--fancybox-opacity",e))}},{key:"onMousedown",value:function(){"ready"===this.state&&document.body.classList.add("is-using-mouse")}},{key:"onKeydown",value:function(t){var e,i,n,o;this.isTopmost()&&(document.body.classList.remove("is-using-mouse"),e=t.key,!(i=this.option("keyboard"))||t.ctrlKey||t.altKey||t.shiftKey||(n=t.composedPath()[0],o=(o=document.activeElement&&document.activeElement.classList)&&o.contains("carousel__button"),("Escape"===e||o||!t.target.isContentEditable&&-1===["BUTTON","TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].indexOf(n.nodeName))&&!1!==this.trigger("keydown",e,t)&&"function"==typeof this[o=i[e]]&&this[o]()))}},{key:"getSlide",value:function(){if(!(t=this.Carousel))return null;var t,e=null===t.page?t.option("initialPage"):t.page;return(t=t.pages||[]).length&&t[e]?t[e].slides[0]:null}},{key:"focus",value:function(t){if(!(gt.ignoreFocusChange||-1<["init","closing","customClosing","destroy"].indexOf(this.state))){var e=this.$container,i=this.getSlide(),n="done"===i.state?i.$el:null;if(!n||!n.contains(document.activeElement)){t&&t.preventDefault(),gt.ignoreFocusChange=!0;for(var o,a=[],s=0,r=Array.from(e.querySelectorAll(Z));s<r.length;s++){var l=r[s],c=l.offsetParent,h=n&&n.contains(l),d=!this.Carousel.$viewport.contains(l);c&&(h||d)?(a.push(l),void 0!==l.dataset.origTabindex&&(l.tabIndex=l.dataset.origTabindex,l.removeAttribute("data-orig-tabindex")),(l.hasAttribute("autoFocus")||!o&&h&&!l.classList.contains("carousel__button"))&&(o=l)):(l.dataset.origTabindex=void 0===l.dataset.origTabindex?l.getAttribute("tabindex"):l.dataset.origTabindex,l.tabIndex=-1)}t?-1<a.indexOf(t.target)?this.lastFocus=t.target:this.lastFocus===e?U(a[a.length-1]):U(e):this.option("autoFocus")&&o?U(o):a.indexOf(document.activeElement)<0&&U(e),this.lastFocus=document.activeElement,gt.ignoreFocusChange=!1}}}},{key:"hideScrollbar",value:function(){var t,e,i;Y&&(t=window.innerWidth-document.documentElement.getBoundingClientRect().width,e="fancybox-style-noscroll",(i=document.getElementById(e))||0<t&&((i=document.createElement("style")).id=e,i.type="text/css",i.innerHTML=".compensate-for-scrollbar {padding-right: ".concat(t,"px;}"),document.getElementsByTagName("head")[0].appendChild(i),document.body.classList.add("compensate-for-scrollbar")))}},{key:"revealScrollbar",value:function(){document.body.classList.remove("compensate-for-scrollbar");var t=document.getElementById("fancybox-style-noscroll");t&&t.remove()}},{key:"clearContent",value:function(t){this.Carousel.trigger("removeSlide",t),t.$content&&(t.$content.remove(),t.$content=null),t.$closeButton&&(t.$closeButton.remove(),t.$closeButton=null),t._className&&t.$el.classList.remove(t._className)}},{key:"setContent",value:function(t,e){var i,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},o=t.$el;if(e instanceof HTMLElement?-1<["img","iframe","video","audio"].indexOf(e.nodeName.toLowerCase())?(i=document.createElement("div")).appendChild(e):i=e:(e=document.createRange().createContextualFragment(e),(i=document.createElement("div")).appendChild(e)),(i=t.filter&&!t.error?i.querySelector(t.filter):i)instanceof Element)return t._className="has-".concat(n.suffix||t.type||"unknown"),o.classList.add(t._className),i.classList.add("fancybox__content"),"none"!==i.style.display&&"none"!==getComputedStyle(i).getPropertyValue("display")||(i.style.display=t.display||this.option("defaultDisplay")||"flex"),t.id&&i.setAttribute("id",t.id),t.$content=i,o.prepend(i),this.manageCloseButton(t),"loading"!==t.state&&this.revealContent(t),i;this.setError(t,"{{ELEMENT_NOT_FOUND}}")}},{key:"manageCloseButton",value:function(t){var e,i=this,n=void 0===t.closeButton?this.option("closeButton"):t.closeButton;!n||"top"===n&&this.$closeButton||((e=document.createElement("button")).classList.add("carousel__button","is-close"),e.setAttribute("title",this.options.l10n.CLOSE),e.innerHTML=this.option("template.closeButton"),e.addEventListener("click",(function(t){return i.close(t)})),"inside"===n?(t.$closeButton&&t.$closeButton.remove(),t.$closeButton=t.$content.appendChild(e)):this.$closeButton=this.$container.insertBefore(e,this.$container.firstChild))}},{key:"revealContent",value:function(t){var e=this,i=(this.trigger("reveal",t),t.$content.style.visibility="",!1);(i=t.error||"loading"===t.state||null!==this.Carousel.prevPage||t.index!==this.options.startIndex?i:void 0===t.showClass?this.option("showClass"):t.showClass)?(t.state="animating",this.animateCSS(t.$content,i,(function(){e.done(t)}))):this.done(t)}},{key:"animateCSS",value:function(t,e,i){t&&t.dispatchEvent(new CustomEvent("animationend",{bubbles:!0,cancelable:!0})),t&&e?(t.addEventListener("animationend",(function n(o){o.currentTarget===this&&(t.removeEventListener("animationend",n),i&&i(),t.classList.remove(e))})),t.classList.add(e)):"function"==typeof i&&i()}},{key:"done",value:function(t){t.state="done",this.trigger("done",t);var e=this.getSlide();e&&t.index===e.index&&this.option("autoFocus")&&this.focus()}},{key:"setError",value:function(t,e){t.error=e,this.hideLoading(t),this.clearContent(t);var i=document.createElement("div");i.classList.add("fancybox-error"),i.innerHTML=this.localize(e||"<p>{{ERROR}}</p>"),this.setContent(t,i,{suffix:"error"})}},{key:"showLoading",value:function(t){var e=this,i=(t.state="loading",t.$el.classList.add("is-loading"),t.$el.querySelector(".fancybox__spinner"));i||((i=document.createElement("div")).classList.add("fancybox__spinner"),i.innerHTML=this.option("template.spinner"),i.addEventListener("click",(function(){e.Carousel.Panzoom.velocity||e.close()})),t.$el.prepend(i))}},{key:"hideLoading",value:function(t){var e=t.$el&&t.$el.querySelector(".fancybox__spinner");e&&(e.remove(),t.$el.classList.remove("is-loading")),"loading"===t.state&&(this.trigger("load",t),t.state="ready")}},{key:"next",value:function(){var t=this.Carousel;t&&1<t.pages.length&&t.slideNext()}},{key:"prev",value:function(){var t=this.Carousel;t&&1<t.pages.length&&t.slidePrev()}},{key:"jumpTo",value:function(){var t;this.Carousel&&(t=this.Carousel).slideTo.apply(t,arguments)}},{key:"isClosing",value:function(){return["closing","customClosing","destroy"].includes(this.state)}},{key:"isTopmost",value:function(){return gt.getInstance().id==this.id}},{key:"close",value:function(t){var e,i=this;t&&t.preventDefault(),this.isClosing()||!1===this.trigger("shouldClose",t)||(this.state="closing",this.Carousel.Panzoom.destroy(),this.detachEvents(),this.trigger("closing",t),"destroy"===this.state)||(this.$container.setAttribute("aria-hidden","true"),this.$container.classList.add("is-closing"),e=this.getSlide(),this.Carousel.slides.forEach((function(t){t.$content&&t.index!==e.index&&i.Carousel.trigger("removeSlide",t)})),"closing"===this.state&&(t=void 0===e.hideClass?this.option("hideClass"):e.hideClass,this.animateCSS(e.$content,t,(function(){i.destroy()}),!0)))}},{key:"destroy",value:function(){var t;"destroy"!==this.state&&(this.state="destroy",this.trigger("destroy"),t=this.option("placeFocusBack")?this.option("triggerTarget",this.getSlide().$trigger):null,this.Carousel.destroy(),this.detachPlugins(),this.Carousel=null,this.options={},this.events={},this.$container.remove(),this.$container=this.$backdrop=this.$carousel=null,t&&U(t),ft.delete(this.id),(t=gt.getInstance())?t.focus():(document.documentElement.classList.remove("with-fancybox"),document.body.classList.remove("is-using-mouse"),this.revealScrollbar()))}}],[{key:"show",value:function(t){return new gt(t,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{})}},{key:"fromEvent",value:function(t){var e,i,n,o,a,s,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!t.defaultPrevented&&!(t.button&&0!==t.button||t.ctrlKey||t.metaKey||t.shiftKey))return n=t.composedPath()[0],(a=(o=n).matches("[data-fancybox-trigger]")||(o=o.closest("[data-fancybox-trigger]"))?(r.triggerTarget=o)&&o.dataset&&o.dataset.fancyboxTrigger:a)&&(a=document.querySelectorAll('[data-fancybox="'.concat(a,'"]')),s=parseInt(o.dataset.fancyboxIndex,10)||0,o=a.length?a[s]:o),Array.from(gt.openers.keys()).reverse().some((function(a){i=o||n;var s=!1;try{i instanceof Element&&("string"==typeof a||a instanceof String)&&(s=i.matches(a)||(i=i.closest(a)))}catch(a){}return!!s&&(t.preventDefault(),e=a,!0)})),a=!1,e&&(r.event=t,(r.target=i).origTarget=n,a=gt.fromOpener(e,r),(s=gt.getInstance())&&"ready"===s.state&&t.detail&&document.body.classList.add("is-using-mouse")),a}},{key:"fromOpener",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=[],n=e.startIndex||0,o=e.target||null,a=void 0!==(e=y({},e,gt.openers.get(t))).groupAll&&e.groupAll,s=void 0===e.groupAttr?"data-fancybox":e.groupAttr,r=s&&o?o.getAttribute("".concat(s)):"";if(o&&!r&&!a||(l=e.root||(o?o.getRootNode():document.body),i=[].slice.call(l.querySelectorAll(t))),!(i=o&&!a?r?i.filter((function(t){return t.getAttribute("".concat(s))===r})):[o]:i).length)return!1;var l=gt.getInstance();return!(l&&-1<i.indexOf(l.options.$trigger))&&(n=o?i.indexOf(o):n,new gt(i=i.map((function(t){for(var e=["false","0","no","null","undefined"],i=["true","1","yes"],n=Object.assign({},t.dataset),o={},a=0,s=Object.entries(n);a<s.length;a++){var r=(l=f(s[a],2))[0],l=l[1];if("fancybox"!==r)if("width"===r||"height"===r)o["_".concat(r)]=l;else if("string"==typeof l||l instanceof String)if(-1<e.indexOf(l))o[r]=!1;else if(-1<i.indexOf(o[r]))o[r]=!0;else try{o[r]=JSON.parse(l)}catch(t){o[r]=l}else o[r]=l}return t instanceof Element&&(o.$trigger=t),o})),y({},e,{startIndex:n,$trigger:o})))}},{key:"bind",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};function i(){document.body.addEventListener("click",gt.fromEvent,!1)}Y&&(gt.openers.size||(/complete|interactive|loaded/.test(document.readyState)?i():document.addEventListener("DOMContentLoaded",i)),gt.openers.set(t,e))}},{key:"unbind",value:function(t){gt.openers.delete(t),gt.openers.size||gt.destroy()}},{key:"destroy",value:function(){for(var t;t=gt.getInstance();)t.destroy();gt.openers=new Map,document.body.removeEventListener("click",gt.fromEvent,!1)}},{key:"getInstance",value:function(t){return t?ft.get(t):Array.from(ft.values()).reverse().find((function(t){return!t.isClosing()&&t}))||null}},{key:"close",value:function(){var t,e=1<arguments.length?arguments[1]:void 0;if(0<arguments.length&&void 0!==arguments[0]&&!arguments[0]){var i=gt.getInstance();i&&i.close(e)}else{var n,o=m(ft.values());try{for(o.s();!(n=o.n()).done;)n.value.close(e)}catch(t){o.e(t)}finally{o.f()}}}},{key:"next",value:function(){var t=gt.getInstance();t&&t.next()}},{key:"prev",value:function(){var t=gt.getInstance();t&&t.prev()}}]),gt);function gt(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return o(this,gt),t=t.map((function(t){return t.width&&(t._width=t.width),t.height&&(t._height=t.height),t})),(e=dt.call(this,y(!0,{},ut,e))).bindHandlers(),e.state="init",e.setItems(t),e.attachPlugins(gt.Plugins),e.trigger("init"),!0===e.option("hideScrollbar")&&e.hideScrollbar(),e.initLayout(),e.initCarousel(),e.attachEvents(),ft.set(e.id,h(e)),e.trigger("prepare"),e.state="ready",e.trigger("ready"),e.$container.setAttribute("aria-hidden","false"),e.option("trapFocus")&&e.focus(),e}pt.version="4.0.31",pt.defaults=ut,pt.openers=new Map,pt.Plugins=st,pt.bind("[data-fancybox]");for(var mt=0,yt=Object.entries(pt.Plugins||{});mt<yt.length;mt++){var bt;"function"==typeof((bt=f(yt[mt],2))[0],bt=bt[1]).create&&bt.create(pt)}t.Carousel=X,t.Fancybox=pt,t.Panzoom=_}));